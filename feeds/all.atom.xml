<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>mcdona1d's blog</title><link href="/" rel="alternate"></link><link href="/feeds/all.atom.xml" rel="self"></link><id>/</id><updated>2015-05-28T21:41:00+08:00</updated><entry><title>CentOS 7 安装l2tp vpn，配置客户端，并使用net-speeder优化速度</title><link href="/CentOS%207%20%E5%AE%89%E8%A3%85l2tp%20vpn%EF%BC%8C%E9%85%8D%E7%BD%AE%E5%AE%A2%E6%88%B7%E7%AB%AF%EF%BC%8C%E5%B9%B6%E4%BD%BF%E7%94%A8net-speeder%E4%BC%98%E5%8C%96%E9%80%9F%E5%BA%A6.html" rel="alternate"></link><updated>2015-05-28T21:41:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-05-28:CentOS 7 安装l2tp vpn，配置客户端，并使用net-speeder优化速度.html</id><summary type="html">&lt;h2&gt;服务端&lt;/h2&gt;
&lt;p&gt;安装环境：DigitalOcean
系统：CentOS 7 x64&lt;/p&gt;
&lt;h3&gt;前言&lt;/h3&gt;
&lt;p&gt;本配置过程依赖于脚本而来，脚本执行后不成功，故手动分步执行，比较容易找到错误并且修正&lt;/p&gt;
&lt;h3&gt;安装依赖的组件&lt;/h3&gt;
&lt;p&gt;yum -y update
yum install -y openswan ppp xl2tpd wget&lt;/p&gt;
&lt;h3&gt;创建ipsec.conf配置文件&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;rm -f /etc/ipsec.conf
nano /etc/ipsec.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;输入以下内容，并替换&lt;code&gt;$serverip&lt;/code&gt;为你的服务器ip地址，然后删掉注释内容。
完成后ctrl+o回车保存，ctrl+x退出&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# /etc/ipsec.conf - Libreswan IPsec configuration file&lt;/span&gt;

&lt;span class="c"&gt;# This file:  /etc/ipsec.conf&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;# Enable when using this configuration file with openswan instead of libreswan&lt;/span&gt;
&lt;span class="c"&gt;#version 2&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;# Manual:     ipsec.conf.5&lt;/span&gt;

&lt;span class="c"&gt;# basic configuration&lt;/span&gt;
config setup
    &lt;span class="c"&gt;# NAT-TRAVERSAL support, see README.NAT-Traversal&lt;/span&gt;
    &lt;span class="nv"&gt;nat_traversal&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;yes
    &lt;span class="c"&gt;# exclude networks used on server side by adding %v4:!a.b.c.0/24&lt;/span&gt;
    &lt;span class="nv"&gt;virtual_private&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;%v4:10.0.0.0/8,%v4:192.168.0.0/16,%v4:172.16.0.0/12
    &lt;span class="c"&gt;# OE is now off by default. Uncomment and change to on, to enable.&lt;/span&gt;
    &lt;span class="nv"&gt;oe&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;off
    &lt;span class="c"&gt;# which IPsec stack to use. auto will try netkey, then klips then mast&lt;/span&gt;
    &lt;span class="nv"&gt;protostack&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;netkey
    &lt;span class="nv"&gt;force_keepalive&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;yes
    &lt;span class="nv"&gt;keep_alive&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1800

conn L2TP-PSK-NAT
    &lt;span class="nv"&gt;rightsubnet&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;vhost:%priv
    &lt;span class="nv"&gt;also&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;L2TP-PSK-noNAT

conn L2TP-PSK-noNAT
    &lt;span class="nv"&gt;authby&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;secret
    &lt;span class="nv"&gt;pfs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;no
    &lt;span class="nv"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;add
    &lt;span class="nv"&gt;keyingtries&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;3
    &lt;span class="nv"&gt;rekey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;no
    &lt;span class="nv"&gt;ikelifetime&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;8h
    &lt;span class="nv"&gt;keylife&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1h
    &lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;transport
    &lt;span class="nv"&gt;left&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$serverip&lt;/span&gt; //替换为你的IP
    &lt;span class="nv"&gt;leftid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$serverip&lt;/span&gt; //替换为你的IP
    &lt;span class="nv"&gt;leftprotoport&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;17/1701
    &lt;span class="nv"&gt;right&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;%any
    &lt;span class="nv"&gt;rightprotoport&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;17/%any
    &lt;span class="nv"&gt;dpddelay&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;40
    &lt;span class="nv"&gt;dpdtimeout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;130
    &lt;span class="nv"&gt;dpdaction&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;clear
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;设置预共享密钥配置文件&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;rm -f /etc/ipsec.secrets
nano /etc/ipsec.secrets
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;粘贴以下两行内容，其中：
&lt;code&gt;$serverip&lt;/code&gt; 替换为你的服务器ip
&lt;code&gt;$mypsk&lt;/code&gt;替换为你的psk密钥，之后建立连接时会用到
完成后ctrl+o回车保存，ctrl+x退出&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;#&lt;/span&gt;&lt;span class="nf"&gt;include&lt;/span&gt;&lt;span class="x"&gt; /etc/ipsec.d/*.secrets&lt;/span&gt;
&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;serverip&lt;/span&gt;&lt;span class="x"&gt; %any: PSK &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;mypsk&lt;/span&gt;&lt;span class="x"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;创建xl2tpd.conf配置文件&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mkdir -p /etc/xl2tpd
rm -f /etc/xl2tpd/xl2tpd.conf
nano /etc/xl2tpd/xl2tpd.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;输入以下内容，并替换&lt;code&gt;$serverip&lt;/code&gt;为你的服务器ip地址，然后删掉注释内容。
完成后ctrl+o回车保存，ctrl+x退出&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt; This is a minimal sample xl2tpd configuration file &lt;span class="k"&gt;for&lt;/span&gt; use
&lt;span class="p"&gt;;&lt;/span&gt; with L2TP over IPsec.
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt; The idea is to provide an L2TP daemon to which remote Windows L2TP/IPsec
&lt;span class="p"&gt;;&lt;/span&gt; clients connect. In this example, the internal &lt;span class="o"&gt;(&lt;/span&gt;protected&lt;span class="o"&gt;)&lt;/span&gt; network
&lt;span class="p"&gt;;&lt;/span&gt; is 192.168.1.0/24.  A special IP range within this network is reserved
&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; the remote clients: 192.168.1.128/25
&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;i.e. 192.168.1.128 ... 192.168.1.254&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt; The listen-addr parameter can be used &lt;span class="k"&gt;if&lt;/span&gt; you want to &lt;span class="nb"&gt;bind &lt;/span&gt;the L2TP daemon
&lt;span class="p"&gt;;&lt;/span&gt; to a specific IP address instead of to all interfaces. For instance,
&lt;span class="p"&gt;;&lt;/span&gt; you could &lt;span class="nb"&gt;bind &lt;/span&gt;it to the interface of the internal LAN &lt;span class="o"&gt;(&lt;/span&gt;e.g. 192.168.1.98
&lt;span class="p"&gt;;&lt;/span&gt; in the example below&lt;span class="o"&gt;)&lt;/span&gt;. Yet another IP address &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;local &lt;/span&gt;ip, e.g. 192.168.1.99&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt; will be used by xl2tpd as its address on pppX interfaces.
&lt;span class="o"&gt;[&lt;/span&gt;global&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;;&lt;/span&gt; ipsec &lt;span class="nv"&gt;saref&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; yes
listen-addr &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nv"&gt;$serverip&lt;/span&gt; //替换为你的IP
auth &lt;span class="nv"&gt;file&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /etc/ppp/chap-secrets
&lt;span class="nv"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 1701
&lt;span class="o"&gt;[&lt;/span&gt;lns default&lt;span class="o"&gt;]&lt;/span&gt;
ip &lt;span class="nv"&gt;range&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10.0.1.10-10.0.1.254
&lt;span class="nb"&gt;local &lt;/span&gt;&lt;span class="nv"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 10.0.1.1
refuse &lt;span class="nv"&gt;chap&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; yes
refuse &lt;span class="nv"&gt;pap&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; yes
require &lt;span class="nv"&gt;authentication&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; yes
&lt;span class="nv"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; L2TPVPN
ppp &lt;span class="nv"&gt;debug&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; yes
&lt;span class="nv"&gt;pppoptfile&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; /etc/ppp/options.xl2tpd
length &lt;span class="nv"&gt;bit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; yes
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;创建options.xl2tpd配置文件&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mkdir -p /etc/ppp
rm -f /etc/ppp/options.xl2tpd
nano /etc/ppp/options.xl2tpd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;粘贴以下内容，无需修改
完成后ctrl+o回车保存，ctrl+x退出&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#require-pap&lt;/span&gt;
&lt;span class="c"&gt;#require-chap&lt;/span&gt;
&lt;span class="c"&gt;#require-mschap&lt;/span&gt;
ipcp-accept-local
ipcp-accept-remote
require-mschap-v2
ms-dns 8.8.8.8
ms-dns 8.8.4.4
asyncmap 0
auth
crtscts
lock
hide-password
modem
debug
name l2tpd
proxyarp
lcp-echo-interval 30
lcp-echo-failure 4
mtu 1400
noccp
connect-delay 5000
&lt;span class="c"&gt;# To allow authentication against a Windows domain EXAMPLE, and require the&lt;/span&gt;
&lt;span class="c"&gt;# user to be in a group &amp;quot;VPN Users&amp;quot;. Requires the samba-winbind package&lt;/span&gt;
&lt;span class="c"&gt;# require-mschap-v2&lt;/span&gt;
&lt;span class="c"&gt;# plugin winbind.so&lt;/span&gt;
&lt;span class="c"&gt;# ntlm_auth-helper &amp;#39;/usr/bin/ntlm_auth --helper-protocol=ntlm-server-1 --require-membership-of=&amp;quot;EXAMPLE\VPN Users&amp;quot;&amp;#39;&lt;/span&gt;
&lt;span class="c"&gt;# You need to join the domain on the server, for example using samba:&lt;/span&gt;
&lt;span class="c"&gt;# http://rootmanager.com/ubuntu-ipsec-l2tp-windows-domain-auth/setting-up-openswan-xl2tpd-with-native-windows-clients-lucid.html&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;创建chap-secrets配置文件，即用户列表及密码&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;rm -f /etc/ppp/chap-secrets
nano /etc/ppp/chap-secrets
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;粘贴以下内容，其中：
&lt;code&gt;$username&lt;/code&gt;替换为你的用户名，
&lt;code&gt;$password&lt;/code&gt;替换为你的密码，
完成后ctrl+o回车保存，ctrl+x退出&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# Secrets for authentication using CHAP&lt;/span&gt;
&lt;span class="c"&gt;# client     server     secret               IP addresses&lt;/span&gt;
&lt;span class="nv"&gt;$username&lt;/span&gt;          l2tpd     &lt;span class="nv"&gt;$password&lt;/span&gt;               *
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;修改系统配置，允许IP转发&lt;/h3&gt;
&lt;p&gt;将下列语句执行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sysctl -w net.ipv4.ip_forward&lt;span class="o"&gt;=&lt;/span&gt;1
sysctl -w net.ipv4.conf.all.rp_filter&lt;span class="o"&gt;=&lt;/span&gt;0
sysctl -w net.ipv4.conf.default.rp_filter&lt;span class="o"&gt;=&lt;/span&gt;0
sysctl -w net.ipv4.conf.&lt;span class="nv"&gt;$eth&lt;/span&gt;.rp_filter&lt;span class="o"&gt;=&lt;/span&gt;0
sysctl -w net.ipv4.conf.all.send_redirects&lt;span class="o"&gt;=&lt;/span&gt;0
sysctl -w net.ipv4.conf.default.send_redirects&lt;span class="o"&gt;=&lt;/span&gt;0
sysctl -w net.ipv4.conf.all.accept_redirects&lt;span class="o"&gt;=&lt;/span&gt;0
sysctl -w net.ipv4.conf.default.accept_redirects&lt;span class="o"&gt;=&lt;/span&gt;0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后：
&lt;code&gt;nano /etc/sysctl.conf&lt;/code&gt;
将下列语句粘贴至末尾,无需修改
完成后ctrl+o回车保存，ctrl+x退出&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;net.ipv4.ip_forward &lt;span class="o"&gt;=&lt;/span&gt; 1
net.ipv4.conf.all.rp_filter &lt;span class="o"&gt;=&lt;/span&gt; 0
net.ipv4.conf.default.rp_filter &lt;span class="o"&gt;=&lt;/span&gt; 0
net.ipv4.conf.&lt;span class="nv"&gt;$eth&lt;/span&gt;.rp_filter &lt;span class="o"&gt;=&lt;/span&gt; 0
net.ipv4.conf.all.send_redirects &lt;span class="o"&gt;=&lt;/span&gt; 0
net.ipv4.conf.default.send_redirects &lt;span class="o"&gt;=&lt;/span&gt; 0
net.ipv4.conf.all.accept_redirects &lt;span class="o"&gt;=&lt;/span&gt; 0
net.ipv4.conf.default.accept_redirects &lt;span class="o"&gt;=&lt;/span&gt; 0
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;允许防火墙端口&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;nano /usr/lib/firewalld/services/l2tpd.xml&lt;/code&gt;
粘贴以下内容，无需修改
完成后ctrl+o回车保存，ctrl+x退出&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;utf-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;service&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;short&amp;gt;&lt;/span&gt;l2tpd&lt;span class="nt"&gt;&amp;lt;/short&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;description&amp;gt;&lt;/span&gt;L2TP IPSec&lt;span class="nt"&gt;&amp;lt;/description&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;port&lt;/span&gt; &lt;span class="na"&gt;protocol=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;udp&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;port=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;500&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;port&lt;/span&gt; &lt;span class="na"&gt;protocol=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;udp&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;port=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;4500&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;port&lt;/span&gt; &lt;span class="na"&gt;protocol=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;udp&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;port=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1701&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/service&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;重启防火墙&lt;/h3&gt;
&lt;p&gt;分别执行下列语句&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;firewall-cmd --permanent --add-service&lt;span class="o"&gt;=&lt;/span&gt;l2tpd
firewall-cmd --permanent --add-service&lt;span class="o"&gt;=&lt;/span&gt;ipsec
firewall-cmd --permanent --add-masquerade
firewall-cmd --reload
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;允许开机启动&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;systemctl &lt;span class="nb"&gt;enable &lt;/span&gt;ipsec xl2tpd
systemctl restart ipsec xl2tpd
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;重启服务器&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;重启服务器&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;测试ipsec&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;ipsec verify
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;问题&lt;/h3&gt;
&lt;p&gt;此时可能会报诸多错误
比如服务未启动等等，根据错误信息修正错误&lt;/p&gt;
&lt;p&gt;最重要的是，可能会出现vpn可以接入，但是不能打开网页
最终找到的问题在于iptables上，centos7的iptables比较怪异，而且直接写入规则并不能保存，最终解决办法只能是自己写一个sh脚本，开机自动执行。&lt;/p&gt;
&lt;h3&gt;解决办法&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;nano etc/rc.d/openl2tp.sh&lt;/code&gt;
然后复制以下文字，然后保存。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;/sbin/iptables -A INPUT -p udp -m policy --dir in --pol ipsec -m udp --dport &lt;span class="m"&gt;1701&lt;/span&gt; -j ACCEPT
/sbin/iptables -A INPUT -p udp -m udp --dport &lt;span class="m"&gt;1701&lt;/span&gt; -j ACCEPT
/sbin/iptables -A INPUT -p udp -m udp --dport &lt;span class="m"&gt;500&lt;/span&gt; -j ACCEPT
/sbin/iptables -A INPUT -p udp -m udp --dport &lt;span class="m"&gt;4500&lt;/span&gt; -j ACCEPT
/sbin/iptables -A INPUT -p esp -j ACCEPT
/sbin/iptables -A INPUT -m policy --dir in --pol ipsec -j ACCEPT
/sbin/iptables -A FORWARD -d 10.0.1.0/24 -j ACCEPT
/sbin/iptables -A FORWARD -s 10.0.1.0/24 -j ACCEPT
/sbin/iptables -A FORWARD -i ppp+ -m state --state NEW,RELATED,ESTABLISHED -j ACCEPT
/sbin/iptables -A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT
/sbin/iptables -t nat -A POSTROUTING -s 10.0.1.0/24 -o eth0 -j MASQUERADE
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;增加运行权限：
&lt;code&gt;chmod +x openl2tp.sh&lt;/code&gt;
然后还需要编辑&lt;code&gt;rc.local&lt;/code&gt;文件，在末尾加上&lt;code&gt;/etc/rc.d/openiptables.sh&lt;/code&gt;
在之后，因为centos7已经不默认使用rc.d作为启动管理，要想使用rc.d
需要给rc.d加上权限
&lt;code&gt;chmod +x /etc/rc.d/rc.local&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;尾声&lt;/h3&gt;
&lt;p&gt;重新执行&lt;code&gt;ipsec verify&lt;/code&gt;
观察结果，如果没有failed，则基本配置成功，尝试连入服务，测试结果&lt;/p&gt;
&lt;h2&gt;客户端&lt;/h2&gt;
&lt;h3&gt;Windows&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;网络共享中心&lt;/li&gt;
&lt;li&gt;设置连接或网络&lt;/li&gt;
&lt;li&gt;连接到工作区&lt;/li&gt;
&lt;li&gt;创建新连接&lt;/li&gt;
&lt;li&gt;使用我的Internet连接&lt;/li&gt;
&lt;li&gt;填入服务器地址&lt;/li&gt;
&lt;li&gt;输入用户名密码&lt;/li&gt;
&lt;li&gt;点连接，然后点跳过&lt;/li&gt;
&lt;li&gt;在网络与共享中心左侧的更改适配器设置中，右击刚才新建的VPN链接，属性&lt;/li&gt;
&lt;li&gt;在安全选项卡的VPN类型，选择L2TP/IPsec，点击高级设置，选择使用预共享密钥做身份验证，填入服务器配置的psk密码，点击确定&lt;/li&gt;
&lt;li&gt;连接，测试&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;net-speeder优化速度&lt;/h2&gt;
&lt;h3&gt;说明&lt;/h3&gt;
&lt;p&gt;作者在其博客说明了该方法的优劣:
这种方式下，直接优点是降低丢包率，直接缺点是耗费双倍流量。一些延伸影响是更容易触发快速恢复逻辑，避免了丢包时窗口缩减过快。一定程度也能提高网络速度。
在一台VPS上测试后发现，未开启时单线程下载、ssh管道速度在十几K级别。开启后可以达到平均300KB+的速度。效果非常明显。但对于不加速就可以跑满带宽的类型来讲（多线程下载），开启后反而由于多出来的无效流量，导致速度减半。所以对于多线程/高速链路，这个方案是不适合的。&lt;/p&gt;
&lt;h3&gt;安装&lt;/h3&gt;
&lt;p&gt;安装依赖库
先安装epel源
&lt;code&gt;rpm -Uvh http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-5.noarch.rpm&lt;/code&gt;
然后即可使用yum安装：
&lt;code&gt;yum install libnet libpcap libnet-devel libpcap-devel gcc&lt;/code&gt;
然后获取net-speeder&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;wget https://github.com/snooda/net-speeder/archive/master.zip
unzip master.zip
&lt;span class="nb"&gt;cd &lt;/span&gt;net-speeder
chmod +x build.sh
./build.sh
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;运行&lt;/h3&gt;
&lt;p&gt;编译完成后,一切顺利就能在当前目录下看到编译的net_speeder文件了.
按照项目说明:
使用方法(需要root权限启动）：
参数：./net_speeder 网卡名 加速规则（bpf规则）
最简单用法：&lt;code&gt;# ./net_speeder venet0 "ip"&lt;/code&gt;加速所有ip协议数据&lt;/p&gt;
&lt;p&gt;这里,Digital Ocean的网卡名是eth0,于是执行
&lt;code&gt;./net_speeder eth0 "ip"&lt;/code&gt;
就可以运行了,具体可以使用ifconfig指令查看你的服务器网卡接口
然后复制到/usr/local/目录并设置开机自启动：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;mkdir /usr/local/net_speeder/
cp net_speeder /usr/local/net_speeder/net_speeder
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;nohup /usr/local/net_speeder/net_speeder eth0 &amp;quot;ip&amp;quot; &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; /etc/rc.local
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;该方案对Ikev2的vpn提速效果十分明显,但对Shadowsocks貌似并不显著(网上也有人Shadowsocks有效果的,此问题待进一步研究)。&lt;/p&gt;</summary><category term="DigitalOcean"></category><category term="CentOS"></category><category term="l2tp"></category><category term="vpn"></category></entry><entry><title>DigitalOcean CentOS 7 配置 shadowsocks 服务端及客户端及优化</title><link href="/DigitalOcean%20CentOS%207%20%E9%85%8D%E7%BD%AE%20shadowsocks%20%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%8A%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%8A%E4%BC%98%E5%8C%96.html" rel="alternate"></link><updated>2015-05-28T16:48:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-05-28:DigitalOcean CentOS 7 配置 shadowsocks 服务端及客户端及优化.html</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;我的DigitalOcean邀请注册链接：[DigitalOcean注册](https://www.digitalocean.com/?refcode=69cda22205ee)
注册后账户可获得10$可使用资金，可以租用两个月的服务器
&lt;/pre&gt;&lt;/div&gt;


&lt;h1&gt;服务器端&lt;/h1&gt;
&lt;p&gt;服务器租用商：&lt;code&gt;DigitalOcean&lt;/code&gt;
安装环境：&lt;code&gt;CentOS 7 X64&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;安装Shadowsocks&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;yum install python-setuptools &amp;amp;&amp;amp; easy_install pip
pip install shadowsocks
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;配置Shadowsocks&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;nano  /etc/shadowsocks.json&lt;/code&gt;
然后输入&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;server&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;0.0.0.0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;server_port&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8388&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;local_address&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;127.0.0.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;local_port&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1080&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;password&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;mypassword&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;timeout&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;method&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;aes-256-cfb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;fast_open&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;workers&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;将上面的&lt;code&gt;mypassword&lt;/code&gt;替换成你的密码，&lt;code&gt;server_port&lt;/code&gt;也是可以修改的，例如3024，传说端口越小，效果越好，这个我没有去验证，但建议不要小于1024，以免引起不必要的麻烦，&lt;code&gt;method&lt;/code&gt;是加密方式，如果想在路由器上运行的话可以改成&lt;code&gt;rc4-md5&lt;/code&gt;这样路由器的负荷会小一些，同时加密的安全性也不错。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ctrl+o 保存&lt;/strong&gt;
&lt;strong&gt;ctrl+x 退出&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;上方代码的解释：
|字段名|   含义|
|--|--|
|server|    服务端监听的地址，服务端可填写0.0.0.0|
|server_port    |服务端的端口|
|local_address| 本地端监听的地址|
|local_port |本地端的端口|
|password   |用于加密的密码|
|timeout    |超时时间，单位秒|
|method |默认 "aes-256-cfb"，参见加密方法|
|fast_open  |是否使用 TCP_FASTOPEN, true / false|
|workers|worker 数量，Unix/Linux 可用，如果不理解含义请不要改|&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;加密方法参见：
https://github.com/clowwindy/shadowsocks/wiki/Encryption&lt;/p&gt;
&lt;p&gt;TCP_FASTOPEN参见：
https://github.com/shadowsocks/shadowsocks/wiki/TCP-Fast-Open&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;测试&amp;amp;启动&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ssserver -c /etc/shadowsocks.json&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;使用supervisor自动后台运行Shadowsocks&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;easy_install supervisor&lt;/code&gt;
然后创建配置文件,supervisord程序在运行后会自动查找并加载此目录配置文件。
&lt;code&gt;echo_supervisord_conf &amp;gt; /etc/supervisord.conf&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;编辑配置文件&lt;code&gt;supervisord.conf&lt;/code&gt;，
&lt;code&gt;nano  /etc/supervisord.conf&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;在后面添加&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;[program:shadowsocks]&lt;/span&gt;
&lt;span class="na"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;ssserver -c /etc/shadowsocks.json&lt;/span&gt;
&lt;span class="na"&gt;autostart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;
&lt;span class="na"&gt;autorestart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;
&lt;span class="na"&gt;user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;nobody&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;完成后启动&lt;code&gt;supervisord&lt;/code&gt;
&lt;code&gt;supervisord -c /etc/supervisord.conf&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;设置supervisord开机启动&lt;/h2&gt;
&lt;p&gt;编辑文件：
&lt;code&gt;nano /etc/rc.local&lt;/code&gt;
在末尾另起一行添加
&lt;code&gt;supervisord&lt;/code&gt;
保存退出（和上文类似）
另centos7还需要为rc.local添加执行权限
&lt;code&gt;chmod +x /etc/rc.local&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;至此运用supervisord控制shadowsocks开机自启和后台运行设置完成&lt;/p&gt;
&lt;h2&gt;shadowsocks服务器TCP优化&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;nano /etc/sysctl.conf&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;fs.file-max = 51200
#提高整个系统的文件限制
net.ipv4.tcp_syncookies = 1
#表示开启SYN Cookies。当出现SYN等待队列溢出时，启用cookies来处理，可防范少量SYN攻击，默认为0，表示关闭；
net.ipv4.tcp_tw_reuse = 1
#表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭；
net.ipv4.tcp_tw_recycle = 0
#表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭；
#为了对NAT设备更友好，建议设置为0。
net.ipv4.tcp_fin_timeout = 30
#修改系統默认的 TIMEOUT 时间。
net.ipv4.tcp_keepalive_time = 1200
#表示当keepalive起用的时候，TCP发送keepalive消息的频度。缺省是2小时，改为20分钟。
net.ipv4.ip_local_port_range = 10000 65000 #表示用于向外连接的端口范围。缺省情况下很小：32768到61000，改为10000到65000。（注意：这里不要将最低值设的太低，否则可能会占用掉正常的端口！）
net.ipv4.tcp_max_syn_backlog = 8192
#表示SYN队列的长度，默认为1024，加大队列长度为8192，可以容纳更多等待连接的网络连接数。
net.ipv4.tcp_max_tw_buckets = 5000
#表示系统同时保持TIME_WAIT的最大数量，如果超过这个数字，TIME_WAIT将立刻被清除并打印警告信息。
#额外的，对于内核版本新于**3.7.1**的，我们可以开启tcp_fastopen：
net.ipv4.tcp_fastopen = 3

# increase TCP max buffer size settable using setsockopt()
net.core.rmem_max = 67108864 
net.core.wmem_max = 67108864 
# increase Linux autotuning TCP buffer limit
net.ipv4.tcp_rmem = 4096 87380 67108864
net.ipv4.tcp_wmem = 4096 65536 67108864
# increase the length of the processor input queue
net.core.netdev_max_backlog = 250000
# recommended for hosts with jumbo frames enabled
net.ipv4.tcp_mtu_probing=1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;保存并退出该文件,然后使用以下指令使配置生效：
&lt;code&gt;sysctl -p&lt;/code&gt;&lt;/p&gt;
&lt;h1&gt;客户端&lt;/h1&gt;
&lt;h2&gt;Shadowsocks GUI&lt;/h2&gt;
&lt;p&gt;服务端启动完成后需要配置本地端，
在此网页根据自己的系统下载最新的&lt;code&gt;Shadowsocks GUI&lt;/code&gt;
http://sourceforge.net/projects/shadowsocksgui/files/dist/
相关说明参见此项目的GitHub
https://github.com/shadowsocks/shadowsocks-gui
win版以.xz结尾，可能需要新版Winrar才能解压&lt;/p&gt;
&lt;p&gt;客户端配置对应服务端配置&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434954070720.png" /&gt;&lt;/p&gt;
&lt;p&gt;Save后可创建快捷方式放到开始菜单启动项里即可开机自动运行&lt;/p&gt;
&lt;h2&gt;SwitchySharp（插件已经更新）&lt;/h2&gt;
&lt;p&gt;在Chrome浏览器中下载插件SwitchySharp并如图配置即可使用代理访问shadowsocks，其他浏览器类似&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434954088785.png" /&gt;&lt;/p&gt;
&lt;h2&gt;SwitchyOmega&lt;/h2&gt;
&lt;p&gt;在Chrome浏览器中下载插件SwitchyOmega（新版的SwitchySharp，个人感觉自动规则切换更加迅速）并如图配置即可使用代理访问shadowsocks，其他浏览器类似&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434954099117.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434954106875.png" /&gt;&lt;/p&gt;
&lt;p&gt;设置完成后点击Chrome右上角SwitchyOmega标志，当为如图所示时即为使用代理上网&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434954114982.png" /&gt;&lt;/p&gt;</summary><category term="DigitalOcean"></category><category term="CentOS"></category><category term="Shadowsocks"></category></entry><entry><title>Sublime Text 2 配置记录</title><link href="/Sublime%20Text%202%20%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95.html" rel="alternate"></link><updated>2015-05-24T13:17:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-05-24:Sublime Text 2 配置记录.html</id><summary type="html">&lt;h2&gt;下载Sublime Text 2&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;官网：&lt;/strong&gt;http://www.sublimetext.com/2&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;推荐使用Portable版本，配置文件跟随程序，设置好后可以随身携带，可以放在网盘里保存&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;或下载我设置完成后的版本，直接使用
http://download.csdn.net/detail/u010027419/8742371&lt;/p&gt;
&lt;h2&gt;破解&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;下载地址：&lt;/strong&gt;http://download.csdn.net/detail/u010027419/8733229&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;使用方法：&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;打开后，先复制License里面全部内容，注意是&lt;strong&gt;全部&lt;/strong&gt;内容，
包括---BEGIN---和---END---&lt;/li&gt;
&lt;li&gt;点Patch Key，去安装目录下找到sublime_text.exe，打开&lt;/li&gt;
&lt;li&gt;然后运行Sublime Text 2，Help -&amp;gt; Enter License，粘贴进去&lt;/li&gt;
&lt;li&gt;软件上方没有UNREGISTERED标志即为成功&lt;blockquote&gt;
&lt;p&gt;软件不破解基本没有任何影响,只是保存的时候偶尔提示&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;插件&lt;/h2&gt;
&lt;p&gt;安装插件前要先安装包管理工具：Package Control
点击ctrl+~组合键，输入：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;urllib2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="nn"&gt;os&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Package Control.sublime-package&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;ipp&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;sublime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;installed_packages_path&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;makedirs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ipp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ipp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ipp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;wb&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;urllib2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;http://sublime.wbond.net/&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;pf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;%20&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;回车，等待程序执行完毕响应之后，重启Sublime Text 2，出现下图，则配置成功
&lt;img alt="Alt text" src="./images/1435026443314.png" /&gt;&lt;/p&gt;
&lt;h3&gt;安装插件&lt;/h3&gt;
&lt;p&gt;点击菜单栏Preferences--&amp;gt; package control  选择 Install Package，然后即可搜索&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;部分插件托管于Google Code或者墙外网站，需翻墙安装&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1435026448509.png" /&gt;&lt;/p&gt;
&lt;h3&gt;推荐插件&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;插件使用方法 ctrl+shift+p，然后选择相应选项&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Emmet&lt;/li&gt;
&lt;li&gt;GBK Encoding Support&lt;/li&gt;
&lt;li&gt;ConvertToUTF8&lt;/li&gt;
&lt;li&gt;Markdown Preview&lt;/li&gt;
&lt;li&gt;Terminal&lt;/li&gt;
&lt;li&gt;SublimeLinter&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SublimeCodeIntel&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;JsFormat&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;用于格式化 javascript 的代码, 之后可以 ctrl + shift + p 找 Format: javascript 就可以了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;配置&lt;/h2&gt;
&lt;p&gt;点击菜单栏Preferences--&amp;gt; Sittings-User&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;{
    //Theme
    &amp;quot;color_scheme&amp;quot;: &amp;quot;Packages/Theme - Spacegray/base16-eighties.dark.tmTheme&amp;quot;,
    &amp;quot;ensure_newline_at_eof_on_save&amp;quot;: true,
    &amp;quot;find_selected_text&amp;quot;: true,
    //fonts
    &amp;quot;font_face&amp;quot;: &amp;quot;Source Code Pro&amp;quot;,
    &amp;quot;font_options&amp;quot;:
    [
        &amp;quot;subpixel_antialias&amp;quot;,
        &amp;quot;no_bold&amp;quot;
    ],
    &amp;quot;font_size&amp;quot;: 11.0,
    &amp;quot;highlight_modified_tabs&amp;quot;: true,
    &amp;quot;ignored_packages&amp;quot;:
    [
        &amp;quot;Vintage&amp;quot;
    ],
    &amp;quot;line_padding_bottom&amp;quot;: 0,
    &amp;quot;line_padding_top&amp;quot;: 0,
    &amp;quot;scroll_past_end&amp;quot;: false,
    &amp;quot;tab_size&amp;quot;: 4,
    &amp;quot;translate_tabs_to_spaces&amp;quot;: true,
    &amp;quot;trim_trailing_white_space_on_save&amp;quot;: true
}
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;字体&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;下载地址：&lt;/strong&gt;http://download.csdn.net/detail/u010027419/8733245&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Source Code Pro
&lt;img alt="Alt text" src="./images/1435026456434.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Consolas
&lt;img alt="Alt text" src="./images/1435026461986.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ubuntu Mono
&lt;img alt="Alt text" src="./images/1435026466153.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;主题&lt;/h2&gt;
&lt;p&gt;SpaceGray&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;一个最小化的设计可以帮你把注意力放在编写代码上，该主题在 UI 上没什么吸引人之处，但很适合编码。
&lt;img alt="Alt text" src="./images/1435026471906.png" /&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;附录&lt;/h2&gt;
&lt;p&gt;Sublime Text 优秀插件排行&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;https://packagecontrol.io/browse&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2014 年 9 个最佳的 Sublime Text 2/3 主题&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;http://www.oschina.net/news/55190/best-sublime-text-2-and-3-theme-for-2014&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;What are the best programming fonts? 字体推荐&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;http://www.slant.co/topics/67/~what-are-the-best-programming-fonts&lt;/p&gt;
&lt;/blockquote&gt;</summary><category term="Editior"></category></entry><entry><title>树莓派替我玩Timberman</title><link href="/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%9B%BF%E6%88%91%E7%8E%A9Timberman.html" rel="alternate"></link><updated>2015-05-11T21:27:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-05-11:树莓派替我玩Timberman.html</id><summary type="html">&lt;p&gt;Timberman游戏规则简单，应该很轻松就能做出一套系统来实现自动化操作，况且机器毕竟是机器，依赖于算法做出的判断基本不会出错。
但是实践下来，遇到了不少问题，最终这套系统没有按照理想的情况运行下去，等将来入手性能更加强大的树莓派2之后，再重启这个小项目吧，下面简单记录一下这个小东西&lt;/p&gt;
&lt;h2&gt;项目缘由与总结&lt;/h2&gt;
&lt;p&gt;手机上的Timberman游戏被朋友挑战，无奈只能达到300多分，突发奇想做一个自动化的系统来替代人进行操作，反超朋友记录
Timberman游戏规则简单，应该很轻松就能做出一套系统来实现自动化操作，况且机器毕竟是机器，依赖于算法做出的判断基本不会出错。
但是实践下来，遇到了不少问题，最终这套系统没有按照理想的情况运行下去，原因如下
1. 树莓派处理速度不够理想，无法瞬间得出运算结果
2. 手里只有盛辉MG995型舵机，实在是大材小用，树莓派也不能很好的进行驱动，也没有单独为他购置一套设备
3. 常规电容笔的工作是依赖于传递人手的电容进行工作的
4. 准备着手准备毕业设计，这个小东西只能暂时搁置了
等将来入手性能更加强大的树莓派2之后，再重启这个小项目吧，下面简单记录一下这个小东西&lt;/p&gt;
&lt;h1&gt;设备图片&lt;/h1&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1435026381132.png" /&gt;&lt;/p&gt;
&lt;h2&gt;实现思路&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;获取图像&lt;/li&gt;
&lt;li&gt;切割&lt;/li&gt;
&lt;li&gt;灰度化&lt;/li&gt;
&lt;li&gt;与标准图进行对比&lt;/li&gt;
&lt;li&gt;判断相似度&lt;/li&gt;
&lt;li&gt;做出响应&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;工具&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;树莓派及摄像头&lt;/li&gt;
&lt;li&gt;一个稳定的支撑平台&lt;/li&gt;
&lt;li&gt;Python Imaging Library 库（简称pil库）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;源代码&lt;/h2&gt;
&lt;p&gt;源代码十分简单，都是直接调用pil库的函数直接运行，舵机因为硬件问题调试的不是很完美，等着以后有了新装备再来完善&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span class="c"&gt;#coding: utf8&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;operator&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;signal&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;atexit&lt;/span&gt;
&lt;span class="c"&gt;#import cv2.cv as cv&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;RPi.GPIO&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;GPIO&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;PIL&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Image&lt;/span&gt;

&lt;span class="n"&gt;atexit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;register&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cleanup&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;servopin&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;
&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setmode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BOARD&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;servopin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;initial&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PWM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;servopin&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;#50HZ&lt;/span&gt;

&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;system&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;fswebcam -r 320×240 -d /dev/video0 -p yuyv -S 5 /root/timberman/testpictire.jpg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
    &lt;span class="n"&gt;takeimg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;testpictire.jpg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="c"&gt;#打开图片&lt;/span&gt;
    &lt;span class="n"&gt;region&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;150&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;220&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;#设置切割接线&lt;/span&gt;

    &lt;span class="n"&gt;ctake&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;takeimg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;region&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;#切割&lt;/span&gt;
    &lt;span class="n"&gt;Lctake&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ctake&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;convert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;L&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;#灰度化&lt;/span&gt;
    &lt;span class="n"&gt;Lctake&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;fintest.jpg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;standimage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Image&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Lstand.jpg&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;h1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Lctake&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;histogram&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;h2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;standimage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;histogram&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="n"&gt;rms&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sqrt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;reduce&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;operator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;rms&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="c"&gt;#p = GPIO.PWM(servopin,50) #50HZ&lt;/span&gt;
        &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;181&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChangeDutyCycle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.5&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;#设置转动角度&lt;/span&gt;
            &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.02&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                      &lt;span class="c"&gt;#等该20ms周期结束&lt;/span&gt;
            &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChangeDutyCycle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                  &lt;span class="c"&gt;#归零信号&lt;/span&gt;

    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="c"&gt;#p = GPIO.PWM(servopin,50) #50HZ&lt;/span&gt;
        &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;181&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChangeDutyCycle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.5&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;#设置转动角度&lt;/span&gt;
            &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.02&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                      &lt;span class="c"&gt;#等该20ms周期结束&lt;/span&gt;
            &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ChangeDutyCycle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;                  &lt;span class="c"&gt;#归零信号&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;h2&gt;后期需要改进项&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;优化代码&lt;/li&gt;
&lt;li&gt;调整舵机可控性&lt;/li&gt;
&lt;li&gt;针对不同场景建立大量标准图，对各个场景进行优化，增加判断准确度&lt;/li&gt;
&lt;li&gt;提高程序运行响应速度甚至考虑通过Arduino控制将项目移植到电脑上，通过PC进行运算&lt;/li&gt;
&lt;li&gt;研究一下如何优雅的让电容笔工作&lt;/li&gt;
&lt;/ul&gt;</summary><category term="RaspberryPi"></category></entry><entry><title>利用Sina App Engine突破限制进行国内代理</title><link href="/%E5%88%A9%E7%94%A8Sina%20App%20Engine%E7%AA%81%E7%A0%B4%E9%99%90%E5%88%B6%E8%BF%9B%E8%A1%8C%E5%9B%BD%E5%86%85%E4%BB%A3%E7%90%86.html" rel="alternate"></link><updated>2015-05-09T22:15:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-05-09:利用Sina App Engine突破限制进行国内代理.html</id><summary type="html">&lt;h1&gt;前言&lt;/h1&gt;
&lt;p&gt;在Google还能正常访问的时候，不少人使用Google App Engine进行代理服务，但是在Google被封杀掉之后这项服务便不能使用了，在国内，我们有BAE，SAE等祖国版服务，某些时候，我们就可以利用这写服务进行国内代理，从而实现突破内网封杀，教育网加速，甚至是隐藏ip等功能。&lt;/p&gt;
&lt;h1&gt;所需要的工具&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Sina App Engine&lt;/li&gt;
&lt;li&gt;Goagent&lt;blockquote&gt;
&lt;p&gt;https://github.com/goagent/goagent下载最新版
资源违规CSDN不允许上传&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;配置过程&lt;/h1&gt;
&lt;h2&gt;申请sae账号&lt;/h2&gt;
&lt;p&gt;你只需要有新浪微博帐号即可申请，申请地址：http://sae.sina.com.cn/
使用微博登录授权，然后填写一些资料即可。&lt;/p&gt;
&lt;h2&gt;添加应用&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;申请成功后，进入“我的应用”后台列表，点击“创建新应用”。如下图
&lt;img alt="Alt text" src="./images/1435026210878.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;等待5秒后点击继续创建&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;分别填写二级域名，应用名称，验证码，开发语言选择PHP 5.3，创建空应用
&lt;img alt="Alt text" src="./images/1435026220036.png" /&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;下载Goagent到本地&lt;/h2&gt;
&lt;p&gt;下载并解压，将有server及local两个文件夹，&lt;/p&gt;
&lt;h2&gt;上传服务端到SAE&lt;/h2&gt;
&lt;p&gt;进入server文件夹的php文件夹内，将index.php的所有内容复制，
打开刚才创建的应用，点击代码管理，创建一个新版本&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1435026233535.png" /&gt;&lt;/p&gt;
&lt;p&gt;然后编辑代码，将刚才index.php中复制的全部代码替换本身的两行代码，保存并关闭。&lt;/p&gt;
&lt;h2&gt;设置本地客户端&lt;/h2&gt;
&lt;p&gt;找到 local 文件夹中的 proxy.ini 文件，用记事本打开编辑。最主要的是改下面的一些参数&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;[gae]&lt;/span&gt;
&lt;span class="na"&gt;enable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;1&lt;/span&gt;
&lt;span class="na"&gt;appid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;123465&lt;/span&gt;
&lt;span class="na"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;123456&lt;/span&gt;

&lt;span class="k"&gt;[php]&lt;/span&gt;
&lt;span class="na"&gt;enable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;1&lt;/span&gt;
&lt;span class="na"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;123456&lt;/span&gt;
&lt;span class="na"&gt;crlf&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;0&lt;/span&gt;
&lt;span class="na"&gt;validate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;0&lt;/span&gt;
&lt;span class="na"&gt;keepalive&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;0&lt;/span&gt;
&lt;span class="na"&gt;listen&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;127.0.0.1:8088&lt;/span&gt;
&lt;span class="na"&gt;fetchserver&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;http://xxx.sinaapp.com/index.php 你刚才建立的应用链接&lt;/span&gt;
&lt;span class="na"&gt;hosts&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;运行代理软件客户端&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;使用管理员身份运行&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;配置浏览器&lt;/h2&gt;
&lt;p&gt;依然使用SwitchyOmega的Chrome插件
具体设置与http://blog.csdn.net/u010027419/article/details/40680205中的类似
添加http代理，地址127.0.0.1，端口8088
&lt;img alt="Alt text" src="./images/1435026242984.png" /&gt;&lt;/p&gt;
&lt;p&gt;然后即可通过sae代理服务访问网络
&lt;img alt="Alt text" src="./images/1435026248118.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1435026252634.png" /&gt;&lt;/p&gt;</summary><category term="GAE"></category></entry><entry><title>（转载） java jsp MyEclipse 通过JDBC链接 SQLServer2012</title><link href="/%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89%20java%20jsp%20MyEclipse%20%E9%80%9A%E8%BF%87JDBC%E9%93%BE%E6%8E%A5%20SQLServer2012.html" rel="alternate"></link><updated>2015-05-07T21:44:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-05-07:（转载） java jsp MyEclipse 通过JDBC链接 SQLServer2012.html</id><summary type="html">&lt;p&gt;下面请一字一句地看，一遍就设置成功，比你设置几十遍失败，费时会少得多。&lt;/p&gt;
&lt;p&gt;首先，在连接数据库之前必须保证SQL Server 2012是采用SQL Server身份验证方式而不是windows身份验证方式。如果在安装时选用了后者，则重新设置如下:
http://blog.163.com/jackie_howe/blog/static/19949134720122261121214/&lt;/p&gt;
&lt;p&gt;当你保证SQL Server 2012是采用SQL Server身份验证方式后，开始如下配置：
一、因为SQL Server 2012装好后，默认协议是没有开启的，所以要打开SQL Server配置管理器中开启：
1、安装好SQL Server 2012后，运行 开始 → 所有程序 → Microsoft SQL Server 2012 → 配置工具 →SQL Server配置管理器，如下图1所示：
&lt;img alt="Alt text" src="./images/1435026049865.png" /&gt;&lt;/p&gt;
&lt;p&gt;图1
2、打开的窗口如下图所示。在左边栏找到 SQL Server网络配置选项，点开它的小箭头，会看到“【你的数据库名】的协议” （图中是ERIC2012的协议），选中它，看右边栏。如下图2所示：
&lt;img alt="Alt text" src="./images/1435026058270.png" /&gt;&lt;/p&gt;
&lt;p&gt;图2
（1）如果Named Pipes 未启用，则右键→启用
（2）右键单击 TCP/IP，选择 启用
（3）双击TCP/IP（右键→属性），在弹出的窗口中选择 “IP地址” 选项卡，将IP1和IP10的【IP地址】设为127.0.0.1，并将所有【IPx】的【已启用】设为是。接着，拖动下拉条到最下方，将 IPAll 中的【TCP端口】设成 【1433】，其余不变。如下图3和图4所示：
&lt;img alt="Alt text" src="./images/1435026065270.png" /&gt;&lt;/p&gt;
&lt;p&gt;图3
&lt;img alt="Alt text" src="./images/1435026069869.png" /&gt;&lt;/p&gt;
&lt;p&gt;图4
3、重新启动计算机。
4、接下来使用telnet命令测试1433端口是否打开。首先要保证telnet服务开启。开启win7 telnet的方法在这里：
http://blog.163.com/jackie_howe/blog/static/199491347201251723939691/&lt;/p&gt;
&lt;p&gt;5、完成上一步后。开始菜单 → 运行cmd → 输入：telnet 127.0.0.1 1433，（注意telnet与127之间有空格，1与1433之间有空格）。如下图：
&lt;img alt="Alt text" src="./images/1435026077314.png" /&gt;&lt;/p&gt;
&lt;p&gt;图5
6、若提示“不能打开到主机的连接，在端口 1433: 连接失败”，则说明1433端口没有打开，需要重新进行以上配置。若连接成功，显示如图6所示：
&lt;img alt="Alt text" src="./images/1435026083405.png" /&gt;&lt;/p&gt;
&lt;p&gt;图6&lt;/p&gt;
&lt;p&gt;二、环境变量CLASSPATH配置：
1、下载Microsoft JDBC Driver 4.0 for SQL Server
在这里下载：http://www.microsoft.com/zh-cn/download/details.aspx?id=11774
4.0版本支持的 SQL Server有：
Microsoft®SQL Server® 2012
Microsoft®SQL Server® 2008 R2
Microsoft®SQL Server® 2008
Microsoft®SQL Server® 2005
Microsoft®SQL Azure&lt;/p&gt;
&lt;p&gt;下载sqljdbc_4.0.2206.100_chs.tar.gz（2.2M），解压文件，得到sqljdbc.jar和sqljdbc4.jar。如果你使用的是jre1.7版本，则忽略sqljdbc.jar（因为它用不了，而且如果和sqljdbc4.jar一起用会出错），只留下sqljdbc4.jar。
以下设置均针对jre1.7版本（1.7以下应该也适用）：
在D盘新建一个文件夹，命名为sqljdbc4，将sqljdbc4.jar复制一个进去。
图7
2、右击 我的电脑 → 属性 → 高级系统设置（高级） → 环境变量，在系统变量中双击CLASSPATH变量（或选中CLASSPATH后 → 编辑），在最后面追加 “;D:\sqljdbc4 \sqljdbc4.jar” （注意最前面有个 ; ）若不存在CLASSPATH，就新建CLASSPATH变量，并且将其值设为“D:\sqljdbc4 \sqljdbc4.jar”。如图8所示：
&lt;img alt="Alt text" src="./images/1435026101328.png" /&gt;&lt;/p&gt;
&lt;p&gt;图8
3、连续点击 确定 以退出环境变量配置。
4、接下来的工作非常重要（因为没做我纠结了几天没成功）！！
有几个地方需要注意：
（1）我们需要将sqljdbc4.jar类库文件拷贝到D:\Program Files\Java\jdk1.7.0\jre\lib\ext目录下。（看你安装在哪个盘，如果是C盘，则最前面的D改为C，下同）&lt;/p&gt;
&lt;p&gt;（2）我们需要将sqljdbc4.jar类库文件拷贝到D:\Program Files\Java\jre7\lib\ext目录下&lt;/p&gt;
&lt;p&gt;最好是，只要是jre文件夹，都复制一个sqljdbc4.jar到jre7\lib\ext里去！！&lt;/p&gt;
&lt;p&gt;（3）如果是使用Tomcat做服务器（我使用的是Tomcat7)，那么我们需要将sqljdbc4.jar类库文件拷贝到C:\apache-tomcat-7.0.11\lib目录下。&lt;/p&gt;
&lt;p&gt;（4）如果是使用Tomcat做服务器，那么我们需要将sqljdbc4.jar类库文件拷贝到D:\apache-tomcat-7.0.11\webapps\gaofei\WEB-INF\lib目录下（gaofei目录是我的应用，这个路径相信你会看明白）&lt;/p&gt;
&lt;p&gt;注意，只有sqljdbc4.jar ！！如果把sqljdbc.jar和sqljdbc4.jar都拷在一起的话，这样就算你全都做对了，也会持续出现有“此驱动程序不支持JRE1.7，请使用支持JDBC4.0的sqljdbc4.jar的类库”的问题。因为jdk默认地选择了sqljdbc.jar（前面我已经提到，只留下sqljdbc4.jar）。&lt;/p&gt;
&lt;p&gt;三、使用Eclipse测试连接SQL Server 2012数据库：
1、打开SQL Server 2012，在其中新建数据库 Test，然后退出SQL Server 2012。
2、运行Eclipse，新建一个Java Project 名为 Test。
3、右单击src，依次选择 Build Path → Configure Build Path，在打开的窗口的右边选择 Libraries标签，然后单击 Add External JARs，找到 sqljdbc4.jar 文件并打开，然后单击 OK 完成构建路径的配置。如图9（我是汉化版的）：
&lt;img alt="Alt text" src="./images/1435026114956.png" /&gt;&lt;/p&gt;
&lt;p&gt;图9
4、在Test中新建包pkg，在pkg中新建一个类Main，在其中输入代码如下：
packagepkg;
importjava.sql.*;&lt;/p&gt;
&lt;p&gt;publicclass Main {
 publicstatic void main(String [] args)
 {
  StringdriverName="com.microsoft.sqlserver.jdbc.SQLServerDriver";
  StringdbURL="jdbc:sqlserver://localhost:1433;DatabaseName=你的数据库名";
  String userName="填写你的用户名，我的是sa";
  String userPwd="填写你的密码";
  try
  {
   Class.forName(driverName);
   ConnectiondbConn=DriverManager.getConnection(dbURL,userName,userPwd);
    System.out.println("连接数据库成功");
  }
  catch(Exception e)
  {
   e.printStackTrace();
   System.out.print("连接失败");
  }  &lt;br /&gt;
 }
}&lt;/p&gt;
&lt;p&gt;温馨提示：如果要对数据库中的某个表进行操作，需要像这样子做：String sql = "SELECT&lt;em&gt;  FROM [数据库名].[dbo].[表名] where xxx "; 例如String sql = "SELECT&lt;/em&gt;  FROM [metro].[dbo].[4] wherexxx" 。注意，中括号是必要的，不能去掉。&lt;/p&gt;
&lt;p&gt;5、点击右键，选择run as——&amp;gt;Java Application, 控制台出现下图则连接成功！
&lt;img alt="Alt text" src="./images/1435026122665.png" /&gt;&lt;/p&gt;
&lt;p&gt;图10&lt;/p&gt;</summary><category term="Jsp"></category><category term="JDBC"></category></entry><entry><title>跑在树莓派上智能家居雏形</title><link href="/%E8%B7%91%E5%9C%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8A%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E9%9B%8F%E5%BD%A2.html" rel="alternate"></link><updated>2015-05-06T11:11:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-05-06:跑在树莓派上智能家居雏形.html</id><summary type="html">&lt;hr /&gt;
&lt;h2&gt;简介&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/下载.png" /&gt;
一个以微信为终端的好玩的小东西&lt;/p&gt;
&lt;h3&gt;可以实现的功能&lt;/h3&gt;
&lt;p&gt;可以实现以手机微信端对树莓派终端进行实时监控、摄像头云台操纵、闯入报警、温度检测、灯光控制、自动光线控制等功能&lt;/p&gt;
&lt;h3&gt;设备图片&lt;/h3&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/IMG_1359.JPG" /&gt;
&lt;img alt="Alt text" src="./images/IMG_1360.JPG" /&gt;
&lt;img alt="Alt text" src="./images/IMG_1363.JPG" /&gt;&lt;/p&gt;
&lt;h3&gt;运行截图&lt;/h3&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/QQ截图20150417153314.png" /&gt;
&lt;img alt="Alt text" src="./images/21.jpg" /&gt;
&lt;img alt="Alt text" src="./images/IMG_1365.PNG" /&gt;&lt;/p&gt;
&lt;h2&gt;需要用到的所有硬件&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;路由器&lt;/li&gt;
&lt;li&gt;树莓派主板&lt;/li&gt;
&lt;li&gt;树莓派电源（5V 2A）&lt;/li&gt;
&lt;li&gt;至少 8g tf卡 （推荐class 10，8g足矣）&lt;/li&gt;
&lt;li&gt;支持ouv的摄像头（罗技C170）&lt;/li&gt;
&lt;li&gt;花生棒及电源（或用&lt;strong&gt;花生壳内网版&lt;/strong&gt;代替）&lt;/li&gt;
&lt;li&gt;乐高积木（小颗粒）&lt;/li&gt;
&lt;li&gt;两根网线&lt;/li&gt;
&lt;li&gt;温度传感器（DHT11）&lt;/li&gt;
&lt;li&gt;光线传感器（光敏&lt;strong&gt;电阻&lt;/strong&gt;模块）&lt;/li&gt;
&lt;li&gt;人体红外传感器（HC-SR501）&lt;/li&gt;
&lt;li&gt;继电器（5V低电平触发）&lt;/li&gt;
&lt;li&gt;步进电机（28BYJ-48-5V）&lt;/li&gt;
&lt;li&gt;步进电机驱动板（UL2003型）&lt;/li&gt;
&lt;li&gt;GPIO连接线若干&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;需要安装的所有软件&lt;/h2&gt;
&lt;h3&gt;Windows端&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Putty（0.63）&lt;/li&gt;
&lt;li&gt;WinSCP（5.1.7）&lt;/li&gt;
&lt;li&gt;Win32DiskImager（0.9.5）&lt;/li&gt;
&lt;li&gt;Notepad++&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Raspberry Pi端&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RASPBIAN 系统&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;下载链接：https://www.raspberrypi.org/downloads/&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;webpy&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;python-lxml &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;python-memcache&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;apache2&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mjpg-streamer&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RPI.GPIO&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;此程序的全部源码&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;源码地址： https://github.com/329703622/wechatpi&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;配置过程&lt;/h2&gt;
&lt;h3&gt;初始化树莓派&lt;/h3&gt;
&lt;p&gt;使用Putty登陆树莓派
Username：pi
Password：raspberry&lt;/p&gt;
&lt;h4&gt;获取root权限&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;sudo passwd root&lt;/code&gt;
（需要输入两次你想设置的root密码）
 &lt;code&gt;sudo passwd --unlock root&lt;/code&gt;
 设置完成后重启Putty，以root身份登陆&lt;/p&gt;
&lt;h4&gt;释放空间及设置时区&lt;/h4&gt;
&lt;p&gt;以root身份登录后会自动弹出raspi-config设置工具，也可直接输入&lt;code&gt;raspi-config&lt;/code&gt;调出
1. 执行第一项，一直选择ok即可
2. 选择第四项，然后选择第二项，进入时区设置
3. 分别选择Asia——Shanghai，确定，即可改为+8时区&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/raspi-config.png" /&gt;
&lt;img alt="Alt text" src="./images/timezone.png" /&gt;&lt;/p&gt;
&lt;h4&gt;设置静态ip&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;sudo nano /etc/network/interfaces&lt;/code&gt;
  把这一行 
&lt;code&gt;iface eth0 inet dhcp&lt;/code&gt;
替换为 
&lt;code&gt;iface eth0 inet static 
address 192.168.1.101 
netmask 255.255.255.0 
gateway 192.168.1.1 
dns-nameservers 114.114.114.114&lt;/code&gt;
修改resolv.config文件 
&lt;code&gt;sudo nano /etc/resolv.conf&lt;/code&gt;
修改为 
&lt;code&gt;nameserver 114.114.114.114&lt;/code&gt;
&lt;strong&gt;否则不能解析域名&lt;/strong&gt;&lt;/p&gt;
&lt;h4&gt;更新软件源&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;nano /etc/apt/sources.list&lt;/code&gt;
删除原文件所有内容，用以下内容取代： 
&lt;code&gt;deb http://mirror.sysu.edu.cn/raspbian/raspbian/ wheezy main contrib non-free 
deb-src http://mirror.sysu.edu.cn/raspbian/raspbian/ wheezy main contrib non-free&lt;/code&gt;
Ps：树莓派官方提供的软件源列表 http://www.raspbian.org/RaspbianMirrors
Ps2：国内的几个软件源&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;中山大学 
http://mirror.sysu.edu.cn/raspbian/raspbian/
中国科学技术大学 
http://mirrors.ustc.edu.cn/raspbian/raspbian/
清华大学 
http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/
华中科技大学 
http://mirrors.hustunique.com/raspbian/raspbian/
大连东软信息学院源（北方用户） 
http://mirrors.neusoft.edu.cn/raspbian/raspbian/
重庆大学源（中西部用户） 
http://mirrors.cqu.edu.cn/Raspbian/raspbian/&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;更新缓存并升级软件&lt;/strong&gt;
&lt;code&gt;sudo apt-get update &amp;amp;&amp;amp; apt-get upgrade&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;安装及配置&lt;/h3&gt;
&lt;p&gt;安装所需要的所有软件，将必须的软件包安装完毕，并且调试成功
调试过程如果有问题可以参见本博客（附录）中的其他文章，或欢迎留言讨论&lt;/p&gt;
&lt;h4&gt;安装软件&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;webpy&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;git clone git://github.com/webpy/webpy.git
ln -s `pwd`/webpy/web
cd /root/webpy
sudo python setup.py install&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RPI.GPIO
（安装RPI.GPIO  首先需要安装RPi.GPIO所需的Python Development Toolkit）&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install python-dev&lt;/code&gt;
&lt;code&gt;sudo apt-get install python-pip&lt;/code&gt;
&lt;code&gt;sudo pip install rpi.gpio&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;python-lxml &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install python-lxml&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;python-memcache&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install python-memcache&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;apache2&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install apache2&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;mjpg-streamer
（安装mjpg-streamer  首先需要安装一下几个依赖包）&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;依赖包：
&lt;code&gt;sudo apt-get install subversion&lt;/code&gt;
&lt;code&gt;sudo apt-get install libv4l-dev&lt;/code&gt;
&lt;code&gt;sudo apt-get install libjpeg8-dev&lt;/code&gt;
&lt;code&gt;sudo apt-get install imagemagick&lt;/code&gt;
（编译安装mjpg-steamer）
&lt;code&gt;wget http://sourceforge.net/code-snapshots/svn/m/mj/mjpg-streamer/code/mjpg-streamer-code-182.zip&lt;/code&gt;
&lt;code&gt;unzip mjpg-streamer-code-182.zip&lt;/code&gt;
&lt;code&gt;cd mjpg-streamer-code-182/mjpg-streamer&lt;/code&gt;
&lt;code&gt;make USE_LIBV4L2=true clean all&lt;/code&gt;
&lt;code&gt;make DESTDIR=/usr install&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;配置路由器&lt;/h4&gt;
&lt;p&gt;在路由器设置界面内，为树莓派设置好静态ip，或者在树莓派端设置静态ip，记住此ip&lt;/p&gt;
&lt;h4&gt;配置花生棒（或&lt;strong&gt;花生壳内网版&lt;/strong&gt;）&lt;/h4&gt;
&lt;p&gt;如果网络环境拥有公网ip，则可以在路由器上设置ddns（ddns可以搜索其他相关文章），如果不具备此环境，则需要花生壳内网版（软件）或花生棒（硬件）来实现公网地址从而与微信公众平台对接。
首先申请一个花生壳域名，然后登陆花生棒管理端页面（http://hsk.oray.com/bang/）
选择内网映射添加映射，填入树莓派静态ip，将树莓派的80端口映射到域名上，并且&lt;strong&gt;勾选使用外网80端口&lt;/strong&gt;（非常重要，否则无法完成对接）
申请另外一个花生壳域名，将此域名映射为树莓派的8080端口，依然&lt;strong&gt;勾选使用外网80端口&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Ps：关于花生壳内网版的获取，可以在
http://www.oray.com/activity/140902/?icn=oray_140902&amp;amp;ici=hsk_home-grid
中缴纳一元认证费开通免费级服务
花生壳内网版的设置与花生棒大同小异，需要注意的是需要如果使用花生壳内网版则在工作前需要确认花生壳内网版正常工作并能正常解析&lt;/p&gt;
&lt;h4&gt;配置apache2&lt;/h4&gt;
&lt;p&gt;因为我的80端口需要被微信公众平台占用，所以我不能让网页走80端口，需要更改端口
&lt;code&gt;nano /etc/apache2/ports.conf&lt;/code&gt;
将Listen 80改为Listen 8080&lt;/p&gt;
&lt;h4&gt;调试摄像头&lt;/h4&gt;
&lt;p&gt;运行考入树莓派中的Git包目录中testcam文件夹中的“stream.sh”文件：
&lt;code&gt;sudo chmod +x stream.sh&lt;/code&gt;（先编译脚本文件，才能用./filename 来运行）
&lt;code&gt;sudo ./stream.sh&lt;/code&gt;
&lt;img alt="Alt text" src="./images/1429104574052.png" /&gt;&lt;/p&gt;
&lt;p&gt;在运行程序时，如果发生错误，可能是之前由于运行过，进程仍然在工作，导致没法再运行，可以先运行ps -A，查看运行中的进程和进程ID号，再使用“&lt;code&gt;kill id号&lt;/code&gt;”杀掉进程&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1429104610621.png" /&gt;&lt;/p&gt;
&lt;p&gt;在pc上运行Git包中的“testcam.html”文件，右击编辑index.html，将&lt;code&gt;树莓派ip&lt;/code&gt;换成你的树莓派固定ip，保存，双击打开testcam.html&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1429104684011.png" /&gt;&lt;/p&gt;
&lt;p&gt;看到摄像头输出图像，说明摄像头工作正常。&lt;/p&gt;
&lt;h3&gt;申请及配置公众平台测试账号&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;打开页面 http://mp.weixin.qq.com/wiki/home/index.html 申请一个公共平台的测试账号&lt;/li&gt;
&lt;li&gt;在左侧选择 &lt;strong&gt;测试号申请|在线调试&lt;/strong&gt;选择接口测试号申请&lt;/li&gt;
&lt;li&gt;申请成功后，进入管理界面&lt;/li&gt;
&lt;li&gt;在接口配置信息的URL处输入你在花生壳申请的域名，后面加上&lt;code&gt;/weixin&lt;/code&gt;
Token中填上你自己喜欢的一串字母，完成后不要点击提交
（此时可以先下载我之前的微信公众平台基础模板进行对接，可以对接成功后在进行接下来的工作，以测试网络环境是否配置完毕
文章地址：http://blog.csdn.net/u010027419/article/details/40835963）&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;下载及配置主程序&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;在此Github中下载完整代码包，解压后进行编辑
（Git：https://github.com/329703622/wechatpi）&lt;/li&gt;
&lt;li&gt;填入刚才自己设置的的Token以及测试号提供的appID和appsecret（yeekey稍后提到）&lt;/li&gt;
&lt;li&gt;填入自己的所有传感器对应的GPIO接口
（传感器调试参考此博客（或附录）其他文章）&lt;/li&gt;
&lt;li&gt;设置完毕之后使用WinSCP放入树莓派文件目录&lt;/li&gt;
&lt;li&gt;使用Putty登录树莓派&lt;/li&gt;
&lt;li&gt;在刚在文件所在目录执行&lt;code&gt;chmod +x start.sh&lt;/code&gt; 更改文件权限&lt;/li&gt;
&lt;li&gt;执行 &lt;code&gt;./start.sh&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;如果出现如图所示信息，则程序正确运行&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/QQ截图20150417153314.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;此时在微信公众平台测试账号的网页上点击提交，如果提示成功，则整套系统基本配置成功&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;部署web页面&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;编辑Git包中的文件中的index.html，在&lt;strong&gt;你的树莓派ip&lt;/strong&gt;处改为树莓派的ip地址&lt;/li&gt;
&lt;li&gt;将index.html上传到&lt;code&gt;/var/www&lt;/code&gt;目录下了，替换之前的index.html&lt;/li&gt;
&lt;li&gt;在浏览器中输入 &lt;code&gt;http://你的树莓派局域网ip:8080/&lt;/code&gt;尝试一下能否访问
如果成功出现页面，则web页面部署成功
&lt;img alt="Alt text" src="./images/QQ截图20150415164040.png" /&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;设置微信公众账号菜单&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;在微信公众平台管理测试账号下方选择&lt;strong&gt;获取access token&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;在左侧菜单选择 &lt;strong&gt; 基础接口  获取access token&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;在右侧最下方选择 &lt;strong&gt;使用网页调试工具调试该接口&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;首先获得access token
在appid和secret中填上之前管理测试账号页面提供的数据，点击检查问题&lt;/li&gt;
&lt;li&gt;下方蓝色的&lt;strong&gt;access_token&lt;/strong&gt;就是一会提交菜单要用到的&lt;strong&gt;access_token&lt;/strong&gt;，复制此token&lt;/li&gt;
&lt;li&gt;分别在接口类型选择&lt;strong&gt;自定义菜单&lt;/strong&gt;和在接口列表选择&lt;strong&gt;自定义菜单创建接口&lt;/strong&gt;。进入如下界面，填入刚才的&lt;strong&gt;access_token&lt;/strong&gt;（&lt;strong&gt;access_token&lt;/strong&gt;具有一定的时效性，时间过长后需重新获取）&lt;/li&gt;
&lt;li&gt;在body中填入Git包中的menu.txt内的内容，点击检查问题&lt;/li&gt;
&lt;li&gt;若显示&lt;strong&gt;Request successful&lt;/strong&gt;即为菜单创建成功。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Ps：取消关注微信号重新关注即可直接查看效果。否则受限于微信限制，需要24小时后缓存刷新方可查看。
Ps2：&lt;strong&gt;参数说明&lt;/strong&gt;
|参数 |是否必须   |说明|
| ------------- |:-------------:|:-----|
|button |是| 一级菜单数组，个数应为1~3个|
|sub_button|    否   |二级菜单数组，个数应为1~5个|
|type   |是| 菜单的响应动作类型|
|name   |是| 菜单标题，不超过16个字节，子菜单不超过40个字节|
|key|   click等点击类型必须|   菜单KEY值，用于消息接口推送，不超过128字节|
|url    |view类型必须|  网页链接，用户点击菜单可打开链接，不超过256字节|&lt;/p&gt;
&lt;h3&gt;申请Yeelink物联网服务&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;打开 http://www.yeelink.net/ 注册账号&lt;/li&gt;
&lt;li&gt;登陆后在管理首页上，您的API Key  即为yeekey&lt;/li&gt;
&lt;li&gt;添加一个新设备&lt;/li&gt;
&lt;li&gt;添加完毕后记住自己的设备ID&lt;/li&gt;
&lt;li&gt;在程序中填入自己的设备id以及yeekey，并将附近&lt;code&gt;自己的yeelink页面&lt;/code&gt;改为自己的页面&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;结尾&amp;amp;心得&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;接触了Python，一门非常棒的语言&lt;/li&gt;
&lt;li&gt;学会了MarkDown写博客，太方便了&lt;/li&gt;
&lt;li&gt;玩了树莓派&lt;/li&gt;
&lt;li&gt;过了买东西剁手的瘾&lt;/li&gt;
&lt;li&gt;无聊了有事情干&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;附录&lt;/h2&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;python的微信公众平台基础代码
https://github.com/329703622/raspchat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;传感器单独调试代码
https://github.com/329703622/Sensor&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;树莓派，玩转微信公共平台--初级篇
http://tieba.baidu.com/p/3232803694?qq-pf-to=pcqq.discussion&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;树莓派，玩转微信公共平台--中级篇
http://tieba.baidu.com/p/3477722264&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;使用树莓派与微信公众平台对接(python)
http://blog.csdn.net/u010027419/article/details/40835963&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;微信公众平台按钮及菜单创建
http://blog.csdn.net/u010027419/article/details/40949065&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;树莓派的摄像头与监控相关
http://blog.csdn.net/u010027419/article/details/41123709&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;树莓派通过GPIO控制步进电机(python)
http://blog.csdn.net/u010027419/article/details/41518321&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;树莓派连接dht11温度传感器获取温度(python)
http://blog.csdn.net/u010027419/article/details/41722261&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;树莓派架设http服务器挂载网页
http://blog.csdn.net/u010027419/article/details/42343057&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;html网页兼容手机浏览器（解决显示页面很小的问题）
http://blog.csdn.net/u010027419/article/details/44857827&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;</summary><category term="RaspberryPi"></category><category term="Sensor"></category><category term="Wechat"></category></entry><entry><title>html网页兼容手机浏览器（解决显示页面很小的问题）</title><link href="/html%E7%BD%91%E9%A1%B5%E5%85%BC%E5%AE%B9%E6%89%8B%E6%9C%BA%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%88%E8%A7%A3%E5%86%B3%E6%98%BE%E7%A4%BA%E9%A1%B5%E9%9D%A2%E5%BE%88%E5%B0%8F%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%89.html" rel="alternate"></link><updated>2015-04-03T17:33:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-04-03:html网页兼容手机浏览器（解决显示页面很小的问题）.html</id><summary type="html">&lt;p&gt;树莓派需要做一个实时监控的微信端网页，所以需要手机自适应的网页，终于搞定，记录一下！&lt;/p&gt;
&lt;p&gt;其实主要就是改掉HTML页面声明：
在网页中加入以下代码，就可以正常显示了：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nt"&gt;&amp;lt;meta&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;viewport&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;content=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;解释：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;width&lt;/code&gt; - &lt;code&gt;viewport&lt;/code&gt;的宽度
&lt;code&gt;height&lt;/code&gt;- &lt;code&gt;viewport&lt;/code&gt;的高度
&lt;code&gt;initial-scale&lt;/code&gt; - 初始的缩放比例
&lt;code&gt;minimum-scale&lt;/code&gt; - 允许用户缩放到的最小比例
&lt;code&gt;maximum-scale&lt;/code&gt; - 允许用户缩放到的最大比例
&lt;code&gt;user-scalable&lt;/code&gt; - 用户是否可以手动缩放&lt;/p&gt;
&lt;p&gt;精简点的话，可以把上面的代码更改为以下代码，效果是一样的：
 &lt;code&gt;html
&amp;lt;meta content="width=device-width,user-scalable=no" name="viewport"&amp;gt;&lt;/code&gt;
最后就是不要设置太大的具体宽度属性了，比如你在网页把Body的宽度属性设为1000px，这肯定是不行的了，但是可以设置为90%，这是屏幕自适应的。&lt;/p&gt;
&lt;p&gt;优化前
&lt;img alt="Alt text" src="./images/1435023954710.png" /&gt;&lt;/p&gt;
&lt;p&gt;优化后
&lt;img alt="Alt text" src="./images/1435023959541.png" /&gt;&lt;/p&gt;</summary><category term="html"></category></entry><entry><title>最值得安装的Chrome增强效率插件</title><link href="/%E6%9C%80%E5%80%BC%E5%BE%97%E5%AE%89%E8%A3%85%E7%9A%84Chrome%E5%A2%9E%E5%BC%BA%E6%95%88%E7%8E%87%E6%8F%92%E4%BB%B6.html" rel="alternate"></link><updated>2015-03-19T13:23:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-03-19:最值得安装的Chrome增强效率插件.html</id><summary type="html">&lt;p&gt;以下插件均为自己测试同类软件后觉得优秀的差价并且正在使用中的，如果有更好的插件，欢迎在留言下写出，谢谢&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;1Password: Password Manager and Secure Wallet&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;配合ios版的1 password使用，强大的密码管理工具，在外国饱受好评的效率工具，     win平台下可以使用wifi与
iphone同步密码。
Chrome商店链接： &lt;a href="https://chrome.google.com/webstore/detail/1password-password-manage/aomjjhallfgjeglblehebfpbcfeobpgk?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;AdBlock&lt;/strong&gt;
    与adblocks plus比较，感觉还是此软件更胜一筹，adblock plus是基于firefox移植过来的
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/adblock/gighmmpiobklfepjocnamgkkbiglidom?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;AutoPagerize&lt;/strong&gt;
    自动连接下一页的工具，搜google，看游民，逛论坛再也不用点击下一页了
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/autopagerize/igiofjhpmpihnifddepnpngfjhkfenbp?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Better History&lt;/strong&gt;
   更好用的历史记录查看工具，会替代自带的历史记录
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/better-history/obciceimmggglbmelaidpjlmodcebijb?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Speed Dial [FVD]+ EverSync - Sync bookmarks, backup favorites&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;综合下来比较顺手的新标签页插件，多种功能可供定制，可以自定义或者选择喜欢的图片作为索引图片。并可
以通过EverSync将自己的设备自动备份
Speed Dial [FVD]： Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/speed-dial-fvd-new-tab-pa/llaficoajjainaijghjlofdfmbjpebpa?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;
EverSync：Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/eversync-sync-bookmarks-b/iohcojnlgnfbmjfjfkbhahhmppcggdog?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Neater Bookmarks （暂时禁用）
    一个方便的浏览书签的插件，因为牺牲美观把chrome自带的书签栏调出来了，所以暂时禁用
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/neater-bookmarks/ofgjggbjanlhbgaemjbkiegeebmccifi?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Proxy SwitchyOmega&lt;/strong&gt;
    fq必备，智能代理插件Proxy SwitchySharp的第二代，支持直接调用gfwlist做只能规则，必备插件之一，配合
shadowsocks或者Goagent使用
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;qSnap: Screen Capture, Screenshot, Annotation&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;截取整个页面的插件，可以把整个页面截取并拼接成一个大的图片保存下来
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/qsnap-screen-capture-scre/bijakfpegjnjmfdoiloebhaemhomjkon?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;SimpleUndoClose&lt;/strong&gt;
    更加方便的 最近关闭的页面插件，手滑党必备
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/simpleundoclose/emhohdghchmjepmigjojkehidlielknj?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Tabs Outliner&lt;/strong&gt;
    可以把正在浏览的标签页打包储存起来，方便下次继续打开观看
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/tabs-outliner/eggkanocgddhmamlbiijnphhppkpkmkl?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Thunder Download Extension for Chrome&lt;/strong&gt;
    迅雷官方chrome下载插件，但是针对某些网页不是特别智能，支持 摁住ctrl点击下载链接不调用迅雷，可以设置
对某些网页不监视
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/thunder-download-extensio/ncennffkjdiamlpmcbajkmaiiiddgioo?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;什么值得买 实时推送&lt;/strong&gt;
    什么值得买的推送插件，有了优惠信息及时推送，剁手利器，官网&lt;a href="http://www.smzdm.com/"&gt;色魔张大妈&lt;/a&gt;
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/febhedbcmjfndciicgfnmaohcaopileb?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;印象笔记·剪藏&lt;/strong&gt;
    印象笔记的chrome插件，可以从chrome直接保存下来喜欢网页的正文到你的印象笔记，手机上的微博可以使用
weico直接发送；知乎，safari等诸多程序均支持直接保存到印象笔记，效率利器
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/evernote-web-clipper/pioclpoplcdbaefihamjohnefbikjilc?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;支付宝安全插件&lt;/strong&gt;
    支付宝自己安装的插件，适配chrome的安全支付插件
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/%E6%94%AF%E4%BB%98%E5%AE%9D%E5%AE%89%E5%85%A8%E6%8F%92%E4%BB%B6/lapoiohkeidniicbalnfmakkbnpejgbi?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;眼不见心不烦（新浪微博）&lt;/strong&gt;
    从接触微博了就开始用上这个插件了，微博里不再会有推广信息等广告，功能强大，可以根据自己的使用习惯定
制，有调整界面，屏蔽广告等功等
Chrome商店链接：&lt;a href="https://chrome.google.com/webstore/detail/%E7%9C%BC%E4%B8%8D%E8%A7%81%E5%BF%83%E4%B8%8D%E7%83%A6%EF%BC%88%E6%96%B0%E6%B5%AA%E5%BE%AE%E5%8D%9A%EF%BC%89/aognaapdfnnldnjglanfbbklaakbpejm?utm_source=chrome-app-launcher-info-dialog"&gt;click here&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary><category term="Chrome"></category></entry><entry><title>app store注册美区appid下载中国区无法下载的app</title><link href="/app%20store%E6%B3%A8%E5%86%8C%E7%BE%8E%E5%8C%BAappid%E4%B8%8B%E8%BD%BD%E4%B8%AD%E5%9B%BD%E5%8C%BA%E6%97%A0%E6%B3%95%E4%B8%8B%E8%BD%BD%E7%9A%84app.html" rel="alternate"></link><updated>2015-02-04T21:55:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-02-04:app store注册美区appid下载中国区无法下载的app.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;因为对google的软件有需求但是中国区google软件所剩无几，便琢磨着转区，但是目前貌似没有特别容易的方法实现，遂直接申请美区appid&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;appid只能在ios设备上注册，在美版apple官网网页注册下载app需提供信用卡信息&lt;/strong&gt;
1. 在设置中注销掉当前的app store id
&lt;img alt="Alt text" src="./images/1435023716091.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;进入appstore，获取任意app，点击创建新的appid
&lt;img alt="Alt text" src="./images/1435023733697.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选择United States，下一步
&lt;img alt="Alt text" src="./images/1435023739024.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Agree Agree
&lt;img alt="Alt text" src="./images/1435023744894.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;填写基本注册信息，Next
&lt;img alt="Alt text" src="./images/1435023752020.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;填写信用卡信息，ios端注册时才会显示none，选择none，Billing Address填写美国地址，我填写的一个转运公司的地址
&lt;img alt="Alt text" src="./images/1435023757538.png" /&gt;
&lt;img alt="Alt text" src="./images/1435023766893.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;附：转运中国收货地址
&lt;img alt="Alt text" src="./images/1435023777032.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;注册完成，可以在app store登陆下载美区app了
&lt;img alt="Alt text" src="./images/1435023781268.png" /&gt;&lt;/li&gt;
&lt;/ol&gt;</summary><category term="Appstore"></category></entry><entry><title>基于mt7620的newifi y1的Pandorabox新软件源备忘</title><link href="/%E5%9F%BA%E4%BA%8Emt7620%E7%9A%84newifi%20y1%E7%9A%84Pandorabox%E6%96%B0%E8%BD%AF%E4%BB%B6%E6%BA%90%E5%A4%87%E5%BF%98.html" rel="alternate"></link><updated>2015-02-03T22:11:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-02-03:基于mt7620的newifi y1的Pandorabox新软件源备忘.html</id><summary type="html">&lt;p&gt;在  系统——软件包——配置  中替换掉之前的软件源，旧软件源已失效&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;dest root /  
dest ram /tmp  
lists_dir ext /var/opkg-lists  
option overlay_root /overlay  
arch all &lt;span class="m"&gt;100&lt;/span&gt;  
arch ralink &lt;span class="m"&gt;200&lt;/span&gt;  
arch ramips &lt;span class="m"&gt;300&lt;/span&gt;  
arch ramips_24kec &lt;span class="m"&gt;400&lt;/span&gt;  
src/gz 14.09_base http://downloads.openwrt.org/snapshots/trunk/ramips/mt7620/packages/base/  
src/gz 14.09_management http://downloads.openwrt.org/snapshots/trunk/ramips/mt7620/packages/management  
src/gz 14.09_oldpackages http://downloads.openwrt.org/snapshots/trunk/ramips/mt7620/packages/oldpackages  
src/gz 14.09_packages http://downloads.openwrt.org/snapshots/trunk/ramips/mt7620/packages/packages  
src/gz 14.09_routing http://downloads.openwrt.org/snapshots/trunk/ramips/mt7620/packages/routing  
src/gz 14.09_telephony http://downloads.openwrt.org/snapshots/trunk/ramips/mt7620/packages/telephony  
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;软件包更新命令： &lt;code&gt;opkg update&lt;/code&gt;
&lt;img alt="Alt text" src="./images/1435023652491.png" /&gt;&lt;/p&gt;</summary><category term="PandoraBox"></category><category term="Newifi Y1"></category></entry><entry><title>Newifi Y1 刷openwrt Pandorabox并 实现透明路由</title><link href="/Newifi%20Y1%20%E5%88%B7openwrt%20Pandorabox%E5%B9%B6%20%E5%AE%9E%E7%8E%B0%E9%80%8F%E6%98%8E%E8%B7%AF%E7%94%B1.html" rel="alternate"></link><updated>2015-02-03T21:54:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-02-03:Newifi Y1 刷openwrt Pandorabox并 实现透明路由.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;刷机参考另外一篇博文 &lt;br /&gt;
HG255d 刷最新openwrt Pandorabox并安装njit拨号
先刷uboot，后刷固件&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Newifi Y1固件下载地址：http://downloads.openwrt.org.cn/PandoraBox/Lenovo-Y1_RY-1S/
将手里的newifi刷成openwrt之后发现自带shadowsocks插件，并且这一版的pandorabox已经是稳定版，5g的问题也得到了解决，下面就说一下如何实现透明路由&lt;/p&gt;
&lt;h2&gt;ChinaDNS-C设置&lt;/h2&gt;
&lt;p&gt;勾选启动，其它默认
&lt;img alt="Alt text" src="./images/1435023462442.png" /&gt;&lt;/p&gt;
&lt;h2&gt;检查DNS设置&lt;/h2&gt;
&lt;p&gt;查看是否已经填写好DNS转发&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1435023480734.png" /&gt;&lt;/p&gt;
&lt;h2&gt;下载host文件&lt;/h2&gt;
&lt;p&gt;下载https://raw.githubusercontent.com/vokins/simpleu/master/hosts改名为block.hosts，用winscp上传到/etc/目录，作用是通过解析host文件屏蔽掉国外网站广告服务器&lt;/p&gt;
&lt;p&gt;或者直接下载此文件http://download.csdn.net/detail/u010027419/8421187
切换到HOSTS和解析文件，勾选忽略解析文件，填写额外HOSTS文件位置
&lt;img alt="Alt text" src="./images/1435023488103.png" /&gt;&lt;/p&gt;
&lt;h2&gt;Shadowsocks配置&lt;/h2&gt;
&lt;p&gt;设置账户，打开透明代理，将chinaDNS 的中国路由表粘贴（国内网段不走Shadowsocks）,端口随意，不要和DNS重复
&lt;img alt="Alt text" src="./images/1435023501293.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1435023513407.png" /&gt;&lt;/p&gt;
&lt;p&gt;通过以上设置，实现国外ip走Shadowsocks通道，并且没有广告，国内ip直连，从而实现透明路由&lt;/p&gt;</summary><category term="Openwrt"></category><category term="PandoraBox"></category><category term="Shadowsocks"></category><category term="Newifi Y1"></category></entry><entry><title>紫光m300 路由器与磊科ni360 q360 nr235 ddwrt tomato等互刷折腾备忘</title><link href="/%E7%B4%AB%E5%85%89m300%20%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%8E%E7%A3%8A%E7%A7%91ni360%20q360%20nr235%20ddwrt%20tomato%E7%AD%89%E4%BA%92%E5%88%B7%E6%8A%98%E8%85%BE%E5%A4%87%E5%BF%98.html" rel="alternate"></link><updated>2015-01-31T19:03:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-01-31:紫光m300 路由器与磊科ni360 q360 nr235 ddwrt tomato等互刷折腾备忘.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;之前帮紫光卓云的人测试njit插件，送了一台紫光的m300路由器，测试结束之后这台路由器便放着吃灰了，简单的搜过这台路由器的折腾，但是因为太小众了也没有人玩。今天索性就把路由拆了，看到处理器是博通的bcm5357,8m flash 64 ram。正巧和磊科和腾讯合作的q3以及和360合作的ni360是一模一样的硬件，然后就搜集好资料开始折腾了。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;通常路由器都有恢复界面，按住reset开机，发现进入紫光自己的恢复界面，查询资料发现，这个界面不是传统的u-boot，这个界面叫miniweb。先刷附件中的两个cfe.bin文件&lt;/p&gt;
&lt;h2&gt;刷写cfe&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;电脑ip设置为192.168.1.2  255.255.255.0  192.168.1.1，连接路由器lan2口&lt;/li&gt;
&lt;li&gt;将cfe.bin，tftpd32.exe置于一个文件夹中，在系统功能里开启tftp客户端，服务端两个功能。打开tftpd32，禁用掉多余的网卡，选择好cfe所在文件夹，暂时不用&lt;/li&gt;
&lt;li&gt;捅住reset开机，开机后松开reset，浏览器清空缓存，进入192.168.1.1&lt;/li&gt;
&lt;li&gt;进入紫光的miniweb之后，先点击reset nvram，回到之前的miniweb后，在浏览器内输入&lt;code&gt;http://192.168.1.1/do.htm?cmd=flash+-noheader+192.168.1.2:ddcfe.bin+flash0.boot&lt;/code&gt;后回车，如看到complete字样，即为升级miniweb成功&lt;/li&gt;
&lt;li&gt;升级成功后重新进入miniweb，发现界面出现变化，则成功&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;刷入q3固件&lt;/h2&gt;
&lt;p&gt;刷写q3固件需要用到tftp智能刷机软件，
&lt;img alt="Alt text" src="./images/1435022977531.png" /&gt;&lt;/p&gt;
&lt;p&gt;选择好附件中的q3.bin，勾选智能刷机。
将路由器电源断开，重新插上
tftp自动开始刷机，刷写完成后输入192.168.1.1即可进入q3路由器设置界面&lt;/p&gt;
&lt;p&gt;ps：&lt;strong&gt; 磊科路由器默认用户名密码 guest guest
ps：刷写ddwrt及不能web直接升级的固件以及救砖同理使用tftp刷机&lt;/strong&gt; &lt;/p&gt;
&lt;h2&gt;web固件互刷&lt;/h2&gt;
&lt;p&gt;进入q3设置界面的固件升级，即可对照附件中的文件互刷固件，文件已整理好上传到此地址：
http://download.csdn.net/detail/u010027419/8413235
http://download.csdn.net/detail/u010027419/8413215
http://download.csdn.net/detail/u010027419/8413245
http://download.csdn.net/detail/u010027419/8413209
（四个文件下载后一起解压）&lt;/p&gt;
&lt;p&gt;附：&lt;strong&gt;q3 ni360可刷固件列表（理论m300亦可）&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;磊科：Q3、NI360、NR236W、NR235W、NR235W（单WAN多拨）、WF2409、WF2471&lt;/li&gt;
&lt;li&gt;腾达：W3000R、N300&lt;/li&gt;
&lt;li&gt;斐讯：FIR302B&lt;/li&gt;
&lt;li&gt;Tomato：Tomato RAF+、Tomato-Shibby、Tomato MultiWAN（独舞）、海蜘蛛、Solarsys、wifidog&lt;/li&gt;
&lt;li&gt;OpenWrt：OpenWrt（没有无线）&lt;/li&gt;
&lt;li&gt;DD-WRT：DD-WRT（要刷cfe）&lt;/li&gt;
&lt;li&gt;多拨叠加：NR236W、NR235W（单WAN多拨）、Tomato MultiWAN（独舞）&lt;/li&gt;
&lt;li&gt;无线中继：WF2409、WF2471、W3000R、N300、DD-WRT&lt;/li&gt;
&lt;li&gt;智能QoS：NR235W、Tomato RAF+&lt;/li&gt;
&lt;li&gt;认证营销：海蜘蛛、Solarsys&lt;/li&gt;
&lt;li&gt;科学上网：Tomato-Shibby、DD-WRT&lt;/li&gt;
&lt;li&gt;安全无聊：Q3、NI360、FIR302B、OpenWrt（没有无线）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;参考资料：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;磊科NI360 Q3刷DD-WRT的简单教程
http://www.anywlan.com/article-4263-1.html&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;不拆机刷CFE，不用TTL，秒刷路由器固件 ！（绝对经典）
http://forum.anywlan.com/thread-200804-1-1.html&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Q3 WEB刷机包 Q3 NI360 WEB互刷NR235W NR236W固件集合 W3000R 海蜘蛛 TT WF2409
http://forum.anywlan.com/thread-279086-1-1.html&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;10个磊科 Q3/Ni360 可刷固件[新增OpenWrt]
http://www.right.com.cn/forum/thread-135732-1-1.html&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;新手入手磊科Q3刷DD-WRT的简单教程 
http://forum.anywlan.com/thread-285987-1-1.html?_dsign=841a98be&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary><category term="m300"></category></entry><entry><title>树莓派架设http服务器挂载网页</title><link href="/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%9E%B6%E8%AE%BEhttp%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8C%82%E8%BD%BD%E7%BD%91%E9%A1%B5.html" rel="alternate"></link><updated>2015-01-02T19:04:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2015-01-02:树莓派架设http服务器挂载网页.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;需要在树莓派上挂在一个小型的网页测试用，比较方便
因为有之前架设Wordpress的经验，在树莓派上就简单许多&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我们要用到的软件就是&lt;strong&gt;apache2&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;安装apache2&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get install apache2
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;配置&lt;/h2&gt;
&lt;p&gt;因为我的80端口被微信公众平台占着，所以我不能让网页走80端口，需要更改端口&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;nano /etc/apache2/ports.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;将&lt;code&gt;Listen 80&lt;/code&gt;改为&lt;code&gt;Listen 8080&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;重启服务&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;service apache2 restart
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;然后就可以在浏览器上先测试一下，输入http://你的树莓派局域网ip:8080/尝试一下能否访问了
如果显示一下界面，apache2就正常工作了&lt;/p&gt;
&lt;p&gt;接下来我们就可以把我们想要挂在的网页上传到&lt;code&gt;/var/www&lt;/code&gt;目录下了，替换&lt;code&gt;index.html&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;有时间把在&lt;code&gt;DigitalOcean&lt;/code&gt;上搭建&lt;code&gt;Wordpress&lt;/code&gt;的总结写出来跟大家分享&lt;/p&gt;</summary><category term="RaspberryPi"></category><category term="Apache"></category></entry><entry><title>Ubuntu使用Shadowsocks client 客户端 总结</title><link href="/Ubuntu%E4%BD%BF%E7%94%A8Shadowsocks%20client%20%E5%AE%A2%E6%88%B7%E7%AB%AF%20%E6%80%BB%E7%BB%93.html" rel="alternate"></link><updated>2014-12-15T15:45:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-12-15:Ubuntu使用Shadowsocks client 客户端 总结.html</id><summary type="html">&lt;p&gt;在被shadowsocks.cn上的几个程序折磨的半死还没有配置好程序后，索性换了一个思路，在shadowsocks的github上找到了shadowsocks的gui程序&lt;/p&gt;
&lt;p&gt;下面是程序的下载地址：http://sourceforge.net/projects/shadowsocksgui/files/dist/
下载&lt;code&gt;shadowsocks-gui-0.6.4-linux-x64.tar.xz (23.9 MB)&lt;/code&gt;文件&lt;/p&gt;
&lt;p&gt;下载后解压，使用终端执行&lt;code&gt;start.sh&lt;/code&gt;文件&lt;/p&gt;
&lt;p&gt;随后出现和win版的gui界面一样的界面，输入自己的配置，可以参考我的另外一片博文，点击Save，配置完成&lt;/p&gt;
&lt;p&gt;进入ubuntu的设置，网络，网络代理，方法选择手动，在socks主机后边填上127.0.0.1，后边填写端口（默认1080），点击应用到整个系统即可开启全局代理&lt;/p&gt;</summary><category term="Shadowsocks"></category><category term="Ubuntu"></category></entry><entry><title>超级好用的vim配置记录</title><link href="/%E8%B6%85%E7%BA%A7%E5%A5%BD%E7%94%A8%E7%9A%84vim%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95.html" rel="alternate"></link><updated>2014-12-05T08:16:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-12-05:超级好用的vim配置记录.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;本来想自己定制属于自己的vim，但是发现了直接就能使用的相当好的vim版本，所以暂时先不写了，贴上文章的链接
http://www.cnblogs.com/ma6174/archive/2011/12/10/2283393.html&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;fork&lt;/h1&gt;
&lt;p&gt;作者把配置好的vim托管到Github上了，地址是：
https://github.com/ma6174/vim&lt;/p&gt;
&lt;h2&gt;简易安装方法：&lt;/h2&gt;
&lt;p&gt;打开终端，执行下面的命令就自动安装好了：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;wget -qO- https://raw.github.com/ma6174/vim/master/setup.sh &lt;span class="p"&gt;|&lt;/span&gt; sh
&lt;/pre&gt;&lt;/div&gt;


&lt;hr /&gt;
&lt;h2&gt;常用设置&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;设定默认解码&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;set fenc=utf-8
set fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;显示行号&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;set nu 
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;不要使用vi的键盘模式，而是vim自己的&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;set nocompatible
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;history文件中需要记录的行数&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;set history=100
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;在处理未保存或只读文件的时候，弹出确认&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;set confirm
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;与windows共享剪贴板&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;set clipboard+=unnamed
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;侦测文件类型&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;filetype on
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;载入文件类型插件&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;filetype plugin on
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;为特定文件类型载入相关缩进文件&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;filetype indent on
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;保存全局变量&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;set viminfo+=!
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;带有如下符号的单词不要被换行分割&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;set iskeyword+=_,$,@,%,#,-
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;语法高亮&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;syntax on
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;高亮字符，让其不受100列限制&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;:highlight OverLength ctermbg=red ctermfg=white guibg=red guifg=white
:match OverLength &amp;#39;\%101v.*&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;状态行颜色&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;highlight StatusLine guifg=SlateBlue guibg=Yellow
highlight StatusLineNC guifg=Gray guibg=White
&lt;/pre&gt;&lt;/div&gt;</summary><category term="Vim"></category><category term="Editior"></category></entry><entry><title>（转载）树莓派连接dht11温度传感器获取温度(python)</title><link href="/%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89%E6%A0%91%E8%8E%93%E6%B4%BE%E8%BF%9E%E6%8E%A5dht11%E6%B8%A9%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8%E8%8E%B7%E5%8F%96%E6%B8%A9%E5%BA%A6(python).html" rel="alternate"></link><updated>2014-12-04T12:23:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-12-04:（转载）树莓派连接dht11温度传感器获取温度(python).html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;参考原文地址：http://www.cnblogs.com/colipso/p/3535901.html&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;RPi.GPIO&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;gpio&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;

&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt; &lt;span class="c"&gt;#使用的树莓派的PIN13也就是GPIO27，根据自己连接位置更改此参数&lt;/span&gt;

&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setwarnings&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setmode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BOARD&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;delay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt; &lt;span class="c"&gt;#20*i usdelay&lt;/span&gt;
    &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="c"&gt;#start work&lt;/span&gt;
&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LOW&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.02&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;HIGH&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="c"&gt;#wait to response&lt;/span&gt;
&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IN&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;continue&lt;/span&gt;

&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;continue&lt;/span&gt;

&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;continue&lt;/span&gt;

&lt;span class="c"&gt;#get data&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;continue&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;gpio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="c"&gt;#get temperature&lt;/span&gt;
&lt;span class="n"&gt;humidity_bit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;humidity_point_bit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;temperature_bit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;temperature_point_bit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;check_bit&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;humidity&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;humidity_point&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;temperature&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;temperature_point&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;check&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;


&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;humidity&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="n"&gt;humidity_bit&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;humidity_point&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="n"&gt;humidity_point_bit&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;temperature&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="n"&gt;temperature_bit&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;temperature_point&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="n"&gt;temperature_point_bit&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;check&lt;/span&gt;&lt;span class="o"&gt;+=&lt;/span&gt;&lt;span class="n"&gt;check_bit&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;humidity&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;humidity_point&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;temperature&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;temperature_point&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;check&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;temperature is &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;temperature&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;wet is &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;something is worong the humidity,humidity_point,temperature,temperature_point,check is&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;humidity_point&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;temperature_point&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;check&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="RaspberryPi"></category><category term="Sensor"></category></entry><entry><title>树莓派经常用到的软件及安装方法备忘</title><link href="/%E6%A0%91%E8%8E%93%E6%B4%BE%E7%BB%8F%E5%B8%B8%E7%94%A8%E5%88%B0%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%8F%8A%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95%E5%A4%87%E5%BF%98.html" rel="alternate"></link><updated>2014-11-26T16:54:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-11-26:树莓派经常用到的软件及安装方法备忘.html</id><summary type="html">&lt;h2&gt;Clone GitHub库的程序&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get install git-core
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;安装 web.py&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;git clone git://github.com/webpy/webpy.git 
ln -s &lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="nb"&gt;pwd&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;/webpy/web 
&lt;span class="nb"&gt;cd&lt;/span&gt; /root/webpy&lt;span class="sb"&gt;``&lt;/span&gt;
sudo python setup.py install
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;安装 python-lxml&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get install python-lxml
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;安装 python-memcache&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get install python-memcache
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;安装RPI.GPIO&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;（首先需要安装RPi.GPIO所需的Python Development toolkit） 
sudo apt-get install python-dev 
sudo apt-get install python-pip 
sudo pip install rpi.gpio
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;重装vi编辑器&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get removevim-common 
sudo apt-get install vim
&lt;/pre&gt;&lt;/div&gt;</summary><category term="RaspberryPi"></category></entry><entry><title>树莓派通过GPIO控制步进电机(python)</title><link href="/%E6%A0%91%E8%8E%93%E6%B4%BE%E9%80%9A%E8%BF%87GPIO%E6%8E%A7%E5%88%B6%E6%AD%A5%E8%BF%9B%E7%94%B5%E6%9C%BA(python).html" rel="alternate"></link><updated>2014-11-26T16:50:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-11-26:树莓派通过GPIO控制步进电机(python).html</id><summary type="html">&lt;p&gt;步进电机的驱动程序一样是让我费了好大力气才使他正常工作，在代码上走了不少弯路&lt;/p&gt;
&lt;p&gt;树莓派不建议直接使用舵机，虽然舵机方便，而且仅需要一根信号线，不过需要舒服pwm信号，而新版的b+板子已经没有了物理的pwm信号口，只能用软件模拟，配置起来比较复杂，为了简便可以使用步进电机代替&lt;/p&gt;
&lt;p&gt;使用步进电机需要步进电机和步进电机驱动板两样东西，我使用的电机和驱动板型号分别为&lt;code&gt;28BYJ-48-5V&lt;/code&gt;和&lt;code&gt;UL2003&lt;/code&gt;芯片的五线四相步进电机驱动板&lt;/p&gt;
&lt;p&gt;首先说明步进电机的驱动原理
驱动板上有IN1, IN2, IN3, IN4四个接口，根据资料得知这四个接口依次设置为低电平就可以驱动，我们分别用杜邦线将GPIO 21（Pin 40），GPIO 20（Pin 38）, GPIO 16（Pin 36）, GPIO 19（Pin 35）和IN1，IN2，IN3，IN4一一相连。
&lt;img alt="Alt text" src="./images/1435021879404.png" /&gt;&lt;/p&gt;
&lt;p&gt;每次将四个GPIO端口按下表依次设置好电平后，可以sleep几十毫秒来控制转速
|序列 |GPIO 21    |GPIO 20|   GPIO 16 |GPIO 19|
|:--:|:--:|:--:|:--:|:--:|
|0  |LOW|   HIGH|   HIGH    |HIGH|
|1  |HIGH   |LOW|   HIGH    |HIGH|
|2  |HIGH   |HIGH   |LOW    |HIGH|
|3  |HIGH   |HIGH   |HIGH   |LOW|
|4  |LOW    |HIGH   |HIGH   |HIGH|&lt;/p&gt;
&lt;p&gt;示例代码：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span class="c"&gt;#coding: utf8&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;RPi.GPIO&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;GPIO&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;array&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;

&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setwarnings&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setmode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BOARD&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;steps&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
&lt;span class="n"&gt;clockwise&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;

&lt;span class="n"&gt;arr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;clockwise&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;arr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

&lt;span class="n"&gt;ports&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;36&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c"&gt;# GPIO 21（Pin 40） GPIO 20（Pin 38） GPIO 16（Pin 36） GPIO 19（Pin 35）&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;arr&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.01&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;            
                &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ports&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;执行&lt;code&gt;python motor.py 90 0&lt;/code&gt; 可以顺时针转动大约80度。&lt;/p&gt;
&lt;p&gt;执行 &lt;code&gt;python motor.py 90 1&lt;/code&gt; 则可逆时针转动大约80度。&lt;/p&gt;
&lt;p&gt;如果看到步进电机动了，至少说明他工作了，，，我之前就是感觉到有信号输入但是却死活不动。。。&lt;/p&gt;
&lt;p&gt;参考原文：http://hugozhu.myalert.info/2013/03/16/03-16-use-raspberry-pi-control-step-motor-rotate-webcam.html
（网上各种资料各种转载，一定要找原版看，要不然可能会格式不正确或者缺少好多东西，我之前就是参考了转载的源码走了不少的弯路！）&lt;/p&gt;</summary><category term="RaspberryPi"></category><category term="Sensor"></category></entry><entry><title>HG255d 刷最新openwrt Pandorabox并安装njit拨号</title><link href="/HG255d%20%E5%88%B7%E6%9C%80%E6%96%B0openwrt%20Pandorabox%E5%B9%B6%E5%AE%89%E8%A3%85njit%E6%8B%A8%E5%8F%B7.html" rel="alternate"></link><updated>2014-11-25T17:25:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-11-25:HG255d 刷最新openwrt Pandorabox并安装njit拨号.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;本文用到的固件bin和njit插件
http://download.csdn.net/detail/u010027419/8197369
固件并非最新版本，最新版本存在兼容问题。更新版本可在http://downloads.openwrt.org.cn/PandoraBox/HuaWei_HG255D/自行查看
pandorabox为openwrt定制版固件，集成常用软件包，方便使用&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;刷openwrt&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;下载好固件之后，将路由器多余的线拔掉，关闭路由，只留路由的lan口和电脑的连线及电源线，本人一般常用的是lan3口，之后将电脑的无线断掉，防止干扰，并且将有线的ip设置成如图
&lt;img alt="Alt text" src="./images/1435021671408.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;捅住reset口，打开电源，，五秒后放开reset，若路由器power灯常量，则进入刷机模式。在浏览器中输入192.168.1.1进入刷机界面
&lt;img alt="Alt text" src="./images/1435021677622.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;重要提示&lt;/strong&gt;，如果无法进入或提示404或如图所示自己跳转到http://192.168.1.1/cgi-bin/luci页面，则需要清除页面缓存，或者更换浏览器进行
&lt;img alt="Alt text" src="./images/1435021685085.png" /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;路由器刷新完成后会自动重启，具体时间不一定，请一定耐心等候。刷机完成后路由会自动重启
&lt;img alt="Alt text" src="./images/1435021689978.png" /&gt;
&lt;img alt="Alt text" src="./images/1435021699035.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;等系统重新启动完成后输入192.168.1.1进入路由界面，刷机完成
ps:默认用户名密码 root/admin
&lt;img alt="Alt text" src="./images/1435021704543.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;安装inode拨号程序&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;此程序为基于njit定制版，理论支持代替5.2以下（不包含5.2）的所有inode拨号
5.2以上版本会出现无法连接或者连上后不停掉线等不确定问题&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;编辑&lt;code&gt;/etc/opkg.conf&lt;/code&gt;
在末尾加上&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;arch all 100
arch ralink 200
arch ramips 300
arch ramips_24kec 300
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;或直接讲附件中的&lt;code&gt;opkg.conf&lt;/code&gt; 将其替换&lt;/p&gt;
&lt;p&gt;使用winscp将附件中的两个ipk复制到路由根目录下
进入根目录 执行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;opkg install libpcap_1.1.1-2_ramips.ipk
opkg install luci-app-x3c8021x_0.11+svn9957-1_ramips.ipk
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;安装完成后重启路由器
&lt;img alt="Alt text" src="./images/1435021711952.png" /&gt;&lt;/p&gt;
&lt;p&gt;点击网络-接口-修改wan口设置 配置ip为你的申请的ip，并将其余参数设置完成，点击保存，点高级设置，将mac克隆成绑定的mac，勾选开机自动运行。点击保存&amp;amp;应用&lt;/p&gt;
&lt;p&gt;点击网络-H3C校园网络认证根据实际情况设置好自己的参数，（此处wan口为eth2.2，视情况而定）点击保存&amp;amp;应用。&lt;/p&gt;
&lt;p&gt;将物理的线路接好，重启路由器，配置正确的话此时应该已经可以上网。&lt;/p&gt;</summary><category term="Openwrt"></category><category term="Pandorabox"></category><category term="njit"></category></entry><entry><title>使用Screen后台执行任务，防止SSH中断</title><link href="/%E4%BD%BF%E7%94%A8Screen%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8C%E4%BB%BB%E5%8A%A1%EF%BC%8C%E9%98%B2%E6%AD%A2SSH%E4%B8%AD%E6%96%AD.html" rel="alternate"></link><updated>2014-11-18T20:30:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-11-18:使用Screen后台执行任务，防止SSH中断.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;Screen，虚拟终端管理器。可以在后台管理终端界面，防止SSH断开以后任务停止运行&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;安装：&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install screen&lt;/code&gt;&lt;/p&gt;
&lt;h1&gt;使用：&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;创建虚拟终端，
使用putty登录树莓派后执行
&lt;code&gt;screen -S terminal1&lt;/code&gt;
这样即可创建一个名为terminal1的终端
此时便可以随意执行操作
例如执行&lt;code&gt;sudo apt-get upgrade&lt;/code&gt;，或者其它消耗时间比较长的工作，像编译内核等等。
按ctrl+a后再按d保存虚拟终端，系统提示deatached即为保存成功
接下来可以断开SSH终端，虚拟终端仍会执行&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;访问已经创建好的终端
&lt;code&gt;screen -ls&lt;/code&gt;   列出已经创建的正在后台运行的终端
&lt;code&gt;screen -r xxx&lt;/code&gt; 进入终端
例如&lt;code&gt;screen -r terminal1&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;彻底退出
&lt;code&gt;screen -r&lt;/code&gt;进入终端后执行&lt;code&gt;exit&lt;/code&gt;即可完全退出&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary><category term="Screen"></category><category term="Linux"></category></entry><entry><title>树莓派的摄像头与监控相关</title><link href="/%E6%A0%91%E8%8E%93%E6%B4%BE%E7%9A%84%E6%91%84%E5%83%8F%E5%A4%B4%E4%B8%8E%E7%9B%91%E6%8E%A7%E7%9B%B8%E5%85%B3.html" rel="alternate"></link><updated>2014-11-14T21:17:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-11-14:树莓派的摄像头与监控相关.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;此文中实用的脚本下载链接
http://download.csdn.net/detail/u010027419/8186201&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;将USB摄像头插上，查看是否找到设备，&lt;/h2&gt;
&lt;p&gt;输入：
&lt;code&gt;lsusb&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;其中Logitech就是摄像头，说明找到usb设备了，然后再看看设备驱动是否正常：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt; ls /dev/vid*
 /dev/video0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;看到video0说明驱动正常，如果找不到可能驱动不对，或者工作不正常，尝试调整供电，或者安装驱动&lt;/p&gt;
&lt;h2&gt;安装必要的软件集：&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get install subversion
sudo apt-get install libv4l-dev
sudo apt-get install libjpeg8-dev
sudo apt-get install imagemagick
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;下载mipg-steamer软件，编译并安装：&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;wget http://sourceforge.net/code-snapshots/svn/m/mj/mjpg-streamer/code/mjpg-streamer-code-182.zip
unzip mjpg-streamer-code-182.zip（本人下载完后文件名是mjpg-streamer-code-182.zip.1）
&lt;span class="nb"&gt;cd &lt;/span&gt;mjpg-streamer-code-182/mjpg-streamer
make &lt;span class="nv"&gt;USE_LIBV4L2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true &lt;/span&gt;clean all
make &lt;span class="nv"&gt;DESTDIR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr install
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;运行&lt;/h2&gt;
&lt;p&gt;运行考入树莓派中的源程序目录中的“stream.sh”文件：
&lt;code&gt;pi@raspberrypi:/home/camtank# sudo chmod 777 stream.sh&lt;/code&gt;
&lt;code&gt;pi@raspberrypi:/home/camtank# sudo ./stream.sh&lt;/code&gt;
&lt;img alt="Alt text" src="./images/1434972664569.png" /&gt;&lt;/p&gt;
&lt;p&gt;在运行程序时，如果发生错误，可能是之前由于运行过，进程仍然在工作，导致没法再运行，可以先运行&lt;code&gt;ps -A&lt;/code&gt;，查看运行中的进程和进程ID号，再使用&lt;code&gt;kill 2470&lt;/code&gt;杀掉进程
&lt;img alt="Alt text" src="./images/1434972671491.png" /&gt;&lt;/p&gt;
&lt;p&gt;在pc上运行源程序目录中的“index.html”文件，右击编辑index.html，将树莓派的地址换成你的树莓派ip，保存双击打开index.html
&lt;img alt="Alt text" src="./images/1434972677660.png" /&gt;&lt;/p&gt;
&lt;p&gt;看到视频了，就说明摄像头工作正常了，到此摄像头的工作就结束了
另外将html中的地址换成&lt;code&gt;http://&amp;lt;树莓派IP&amp;gt;:8001/?action=snapshot&lt;/code&gt;就可以看到静态的图像&lt;/p&gt;
&lt;h2&gt;使用fswebcam截图&lt;/h2&gt;
&lt;h3&gt;安装&lt;code&gt;fswebcam&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install fswebcam&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;使用&lt;code&gt;fswebcam&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;fswebcam -d /dev/video0 -r 640x480 -p JPEG -S 5 -D 1 /home/pi/test.jpg&lt;/code&gt;
摄像头截图 设备分辨率 格式 忽略5帧 延时一秒 输出地址文件名
&lt;code&gt;scrot-t 40% -q 80 screen.jpg&lt;/code&gt;
屏幕截图 40%大小缩略图图片质量80 输出图片&lt;/p&gt;</summary><category term="RaspberryPi"></category><category term="Cam"></category></entry><entry><title>微信公众平台按钮及菜单创建</title><link href="/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%B9%B3%E5%8F%B0%E6%8C%89%E9%92%AE%E5%8F%8A%E8%8F%9C%E5%8D%95%E5%88%9B%E5%BB%BA.html" rel="alternate"></link><updated>2014-11-09T13:06:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-11-09:微信公众平台按钮及菜单创建.html</id><summary type="html">&lt;ul&gt;
&lt;li&gt;在微信公众平台管理测试账号下方选择会话界面自定义菜单&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434970375899.png" /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;在界面底部找到使用网页调试工具调试该接口
&lt;img alt="Alt text" src="./images/1434970381330.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;首先获得access_token
&lt;img alt="Alt text" src="./images/1434970385918.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在appid和secret中填上之前管理测试账号页面提供的数据，点击检查问题
&lt;img alt="Alt text" src="./images/1434970390865.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;下方的access_token就是一会提交菜单要用到的access_token&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;分别选择接口类型和接口列表。进入如下界面
&lt;img alt="Alt text" src="./images/1434970397912.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在access_token中输入刚才得到的access_token，&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;在body中输入刚才微信公众平台开发者文档中的例子&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="nt"&gt;&amp;quot;button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:[&lt;/span&gt;
     &lt;span class="p"&gt;{&lt;/span&gt;  
          &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;click&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;今日歌曲&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;quot;key&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;V1001_TODAY_MUSIC&amp;quot;&lt;/span&gt;
      &lt;span class="p"&gt;},&lt;/span&gt;
      &lt;span class="p"&gt;{&lt;/span&gt;
           &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;菜单&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
           &lt;span class="nt"&gt;&amp;quot;sub_button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:[&lt;/span&gt;
           &lt;span class="p"&gt;{&lt;/span&gt;    
               &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;view&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;搜索&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;quot;url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;http://www.soso.com/&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;view&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;视频&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;quot;url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;http://v.qq.com/&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;click&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;赞一下我们&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="nt"&gt;&amp;quot;key&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;V1001_GOOD&amp;quot;&lt;/span&gt;
            &lt;span class="p"&gt;}]&lt;/span&gt;
       &lt;span class="p"&gt;}]&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;点击检查问题
如果显示：
&lt;img alt="Alt text" src="./images/1434970431722.png" /&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;即为菜单&lt;strong&gt;创建成功&lt;/strong&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;取消关注微信号重新关注即可直接查看效果。否则受限于微信限制，需要24小时后缓存刷新方可查看。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;其他新增按钮类型的请求示例&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;扫码&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
            &lt;span class="nt"&gt;&amp;quot;sub_button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;scancode_waitmsg&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;扫码带提示&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;key&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rselfmenu_0_0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;sub_button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
                &lt;span class="p"&gt;},&lt;/span&gt; 
                &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;scancode_push&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;扫码推事件&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;key&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rselfmenu_0_1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;sub_button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
                &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt; 
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;发图&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
            &lt;span class="nt"&gt;&amp;quot;sub_button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pic_sysphoto&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;系统拍照发图&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;key&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rselfmenu_1_0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                   &lt;span class="nt"&gt;&amp;quot;sub_button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
                 &lt;span class="p"&gt;},&lt;/span&gt; 
                &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pic_photo_or_album&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;拍照或者相册发图&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;key&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rselfmenu_1_1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;sub_button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
                &lt;span class="p"&gt;},&lt;/span&gt; 
                &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;pic_weixin&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;微信相册发图&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;key&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rselfmenu_1_2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                    &lt;span class="nt"&gt;&amp;quot;sub_button&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
                &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="p"&gt;},&lt;/span&gt; 
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;发送位置&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
            &lt;span class="nt"&gt;&amp;quot;type&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;location_select&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
            &lt;span class="nt"&gt;&amp;quot;key&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;rselfmenu_2_0&amp;quot;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;参数说明&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;参数&lt;/th&gt;
&lt;th align="center"&gt;是否必须&lt;/th&gt;
&lt;th align="center"&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;button&lt;/td&gt;
&lt;td align="center"&gt;是&lt;/td&gt;
&lt;td align="center"&gt;一级菜单数组，个数应为1~3个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;sub_button&lt;/td&gt;
&lt;td align="center"&gt;否&lt;/td&gt;
&lt;td align="center"&gt;二级菜单数组，个数应为1~5个&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;type&lt;/td&gt;
&lt;td align="center"&gt;是&lt;/td&gt;
&lt;td align="center"&gt;菜单的响应动作类型&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;name&lt;/td&gt;
&lt;td align="center"&gt;是&lt;/td&gt;
&lt;td align="center"&gt;菜单标题，不超过16个字节，子菜单不超过40个字节&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;key&lt;/td&gt;
&lt;td align="center"&gt;click等点击类型必须&lt;/td&gt;
&lt;td align="center"&gt;菜单KEY值，用于消息接口推送，不超过128字节&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="center"&gt;url&lt;/td&gt;
&lt;td align="center"&gt;view类型必须&lt;/td&gt;
&lt;td align="center"&gt;网页链接，用户点击菜单可打开链接，不超过256字节&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;</summary><category term="Wechat"></category></entry><entry><title>使用树莓派与微信公众平台对接(python)</title><link href="/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8E%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%B9%B3%E5%8F%B0%E5%AF%B9%E6%8E%A5(python).html" rel="alternate"></link><updated>2014-11-05T22:46:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-11-05:使用树莓派与微信公众平台对接(python).html</id><summary type="html">&lt;p&gt;在网上参阅众多教程之后，均无法找到可直接在树莓派上运行的python微信平台对接模板。&lt;/p&gt;
&lt;p&gt;参阅http://my.oschina.net/yangyanxing/blog/159215此博客的基于sae微信平台教程后，略微修改，可以在树莓派上完美运行，&lt;/p&gt;
&lt;p&gt;下面是此模板的Github链接
https://github.com/329703622/raspchat&lt;/p&gt;
&lt;h2&gt;使用方法：&lt;/h2&gt;
&lt;p&gt;将此文件夹放到树莓派中，更改index.py中的your_token为你的token
在文件夹目录内，输入命令执行：sudo python index.py 80
80为绑定到80端口上，微信公众平台目前仅支持80端口&lt;/p&gt;
&lt;p&gt;Ps:如果无法执行，可能需要更改文件权限：chmod +x index.py
需要安装webpy和python-lxml&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;git clone git://github.com/webpy/webpy.git
ln -s &lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="nb"&gt;pwd&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;/webpy/web
&lt;span class="nb"&gt;cd&lt;/span&gt; /root/webpy
sudo python setup.py install
sudo apt-get install python-lxml
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;正确运行的效果&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434970080569.png" /&gt;&lt;/p&gt;
&lt;p&gt;程序正确执行后，在微信公众平台的接口配置界面分别输入你的ip或者域名及Token：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;http://你的ip或域名/weixin&lt;/code&gt;
然后输入刚才配置程序时更改的自己的&lt;code&gt;token&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434970090648.png" /&gt;&lt;/p&gt;
&lt;p&gt;点击提交，提示配置成功。&lt;/p&gt;
&lt;p&gt;在微信上对此公众平台测试号发送消息，微信可以返回你发送的消息。&lt;/p&gt;
&lt;p&gt;至此，微信平台与树莓派的对接结束&lt;/p&gt;
&lt;p&gt;参考教程：http://my.oschina.net/yangyanxing/blog/159215&lt;/p&gt;</summary><category term="RaspberryPi"></category><category term="Wechat"></category></entry><entry><title>（转载）Digital Ocean使用SSH Key登录</title><link href="/%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89Digital%20Ocean%E4%BD%BF%E7%94%A8SSH%20Key%E7%99%BB%E5%BD%95.html" rel="alternate"></link><updated>2014-11-01T13:38:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-11-01:（转载）Digital Ocean使用SSH Key登录.html</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;我的邀请注册链接：https://www.digitalocean.com/?refcode=69cda22205ee
注册后账户可获得10￥可使用资金&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;原帖地址：https://www.zxc.so/do-ssh-key.html &lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;创建SSH Key&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;第一步，打开PuTTY Key Generator，Parameters选择SSH-2 RSA，点击Generate。（如图一）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769437904.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;然后软件会显示Please generate some randomness by moving mouse over the blank area，意思是用鼠标在软件区域内随意移动来生成随机的密钥（如图二）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769448469.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;随后公钥（存放在服务器用于验证私钥）和密钥（如与公钥匹配则可通过认证）都生成成功了，首先复制上方的公钥代码（如图三蓝色区域），注意：复制完千万不要关闭窗口&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769454478.png" /&gt;&lt;/p&gt;
&lt;h2&gt;上传SSH Key&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;接下来登录DigitalOcean的控制面板，进入SSH Keys选项卡，点击Add SSH Key（如图四）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769461278.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;进入添加界面后为Key取个名字，然后将刚刚复制的公钥（Public Key）粘贴到下方的输入框，点击CREATE SSH KEY（如图五）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769469458.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt;添加的SSH Key只能用于新创建的Droplet的root用户，对于已创建的Droplet或者其他用户的，我以后会写文章说明。&lt;/p&gt;
&lt;p&gt;随后点击最顶部的CREATE（如图六）&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769474915.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在填好Droplet的各项信息之后，在Add optional SSH Keys的选项选择你刚刚创建的那个SSH Key（如图七）
注意：使用SSH Key新建的Droplet不会发送root密码，建议用Key登录之后使用passwd命令修改root密码（密码强度建议：长度24位以上，大小写字母，数字，特殊符号混合），以备不时之需（如Key不在身旁等等）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769480655.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;然后回到PuTTY Key Generator的界面，点击下方的Save private key，选择路径保存你的私钥，然后就能使用SSH Key登录VPS了！（如图八），注意：不要保存在公用电脑上，任何持有私钥的人都能合法登录VPS。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769488458.png" /&gt;&lt;/p&gt;
&lt;h2&gt;PuTTY使用SSH Key登录VPS流程&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;首先打开PuTTY软件，输入root@服务器IP和端口（一般为22），然后点击SSH》Auth（如图九）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769494379.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;然后在Private key file  for authentication选项选择你的SSH私钥的路径（后缀为.ppk）（如图十）。然后记得回到登陆页点击Default Settings》Save保存设置&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769499390.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;然后点击Open就能自动登录了，全程自动化，完全不需要输入任何东西。（图十一为登录成功界面）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769504943.png" /&gt;&lt;/p&gt;
&lt;h2&gt;WinSCP使用SSH Key登录VPS流程&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;WinSCP是像FTP一样使用SSH管理文件的软件，配置方法和PuTTY大同小异，而且下面的图也标注的很清楚，我也就不再一一赘叙了。
图十二：WinSCP登录账号配置&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769511086.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;图十三：WinSCP选择SSH Key&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769516361.png" /&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;图十四：WinSCP使用SSH Key成功登录&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434769529694.png" /&gt;&lt;/p&gt;</summary><category term="DigitalOcean"></category><category term="Debian"></category></entry><entry><title>树莓派初始化及网络、软件源、中文相关设置</title><link href="/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%8A%E7%BD%91%E7%BB%9C%E3%80%81%E8%BD%AF%E4%BB%B6%E6%BA%90%E3%80%81%E4%B8%AD%E6%96%87%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE.html" rel="alternate"></link><updated>2014-10-30T22:28:00+08:00</updated><author><name>mcdona1d</name></author><id>tag:,2014-10-30:树莓派初始化及网络、软件源、中文相关设置.html</id><summary type="html">&lt;h2&gt;获取root权限&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;sudo passwd root&lt;/code&gt;
&lt;code&gt;sudo passwd --unlock root&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;设置静态ip&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;sudo nano /etc/network/interfaces&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;把这一行
&lt;code&gt;iface eth0 inet dhcp&lt;/code&gt;
替换为&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;iface eth0 inet static
address 192.168.1.101
netmask 255.255.255.0
gateway 192.168.1.1
dns-nameservers 114.114.114.114
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;修改resolv.config文件
&lt;code&gt;sudo nano /etc/resolv.conf
nameserver 114.114.114.114&lt;/code&gt;
否则不能解析域名&lt;/p&gt;
&lt;p&gt;如果你要设置的是无线网卡的，那么除了把 wlan0 的 dhcp 改成static 之外，还需要填写无线网的名称和密码，编辑后的结果大概如下：
&lt;code&gt;iface wlan0 inet static
    wpa-ssidYour_Wifi_SSID
    wpa-pskYour_Wifi_Password
address 192.168.1.200 # 设定的静态IP地址
netmask 255.255.255.0 # 网络掩码
gateway 192.168.1.1  # 网关
network 192.168.1.1  # 网络地址
 #wpa-roam /etc/wpa_supplicant/wpa_supplicant.conf&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Ctrl+O 保存
Ctrl+X 退出&lt;/p&gt;
&lt;p&gt;重启网络生效或reboot重启系统
&lt;code&gt;service networking start&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;更新软件源&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;nano /etc/apt/sources.list&lt;/code&gt;
删除原文件所有内容，用以下内容取代：
&lt;code&gt;deb http://mirror.sysu.edu.cn/raspbian/raspbian/ wheezy main contrib non-free
deb-src http://mirror.sysu.edu.cn/raspbian/raspbian/ wheezy main contrib non-free&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434767581744.png" /&gt;&lt;/p&gt;
&lt;p&gt;Ps：树莓派官方提供的软件源列表http://www.raspbian.org/RaspbianMirrors&lt;/p&gt;
&lt;p&gt;Ps2：国内的几个软件源&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;中山大学
http://mirror.sysu.edu.cn/raspbian/raspbian/&lt;/p&gt;
&lt;p&gt;中国科学技术大学
http://mirrors.ustc.edu.cn/raspbian/raspbian/&lt;/p&gt;
&lt;p&gt;清华大学
http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/&lt;/p&gt;
&lt;p&gt;华中科技大学
http://mirrors.hustunique.com/raspbian/raspbian/&lt;/p&gt;
&lt;p&gt;大连东软信息学院源（北方用户）
http://mirrors.neusoft.edu.cn/raspbian/raspbian/&lt;/p&gt;
&lt;p&gt;重庆大学源（中西部用户）
http://mirrors.cqu.edu.cn/Raspbian/raspbian/&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;更新缓存并升级软件&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get update &amp;amp;&amp;amp; apt-get upgrade&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;安装软件&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install *&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;安装远程桌面&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install xrdp&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;安装VNC&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get install tightvncserver&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;配置VNC&lt;/h3&gt;
&lt;p&gt;vncserver
或者
 /usr/bin/tightvncserver -depth 16 -geometry 10242x768 :1
//设置颜色深度为16（如果设置32,则连接后看到一片空白），后面是屏幕分辨率，你可以自己设置，1是显示编号。
给VNCVIWEWE的端口是5900+N，N就是树莓派启动vncserver时设置的display号&lt;/p&gt;
&lt;p&gt;正确的写法是IP加端口号，但是这边的端口号不是设置的5900，而是在5900基础上加上虚拟机中的VNC序号，如第一张图中显示的2。正确写法是IP：5902   （如我的机子填写   192.168.0.101:5902）&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434767799873.png" /&gt;&lt;/p&gt;
&lt;h2&gt;树莓派的中文相关&lt;/h2&gt;
&lt;p&gt;执行 &lt;code&gt;sudo raspi-config&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Alt text" src="./images/1434767822821.png" /&gt;
&lt;img alt="Alt text" src="./images/1434767831731.png" /&gt;&lt;/p&gt;
&lt;p&gt;操作提示：按空格键在前面打勾或去掉勾（星号=勾），PageUp PageDown快速翻页，Tab键跳到OK按钮上
去掉en_GB.UTF-8 UTF-8
勾上：“en_US.UTF-8 UTF-8”、“zh_CN.UTF-8 UTF-8”、“zh_CN.GBK GBK”&lt;/p&gt;
&lt;p&gt;下一屏幕默认语言选zh_CN.UTF-8。
&lt;img alt="Alt text" src="./images/1434767837877.png" /&gt;&lt;/p&gt;
&lt;p&gt;这里选择的默认语言会用于：桌面环境、命令行程序的--help帮助等&lt;/p&gt;
&lt;h3&gt;安装中文字体“文泉驿正黑”&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get -y install ttf-wqy-zenhe&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;中文输入法&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sudo apt-get -y install scim-pinyin&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;重启生效&lt;/p&gt;</summary><category term="RaspberryPi"></category><category term="Debian"></category></entry></feed>